(function(){var e={6700:function(e,a,o){var t={"./af":3906,"./af.js":3906,"./ar":902,"./ar-dz":3853,"./ar-dz.js":3853,"./ar-kw":299,"./ar-kw.js":299,"./ar-ly":6825,"./ar-ly.js":6825,"./ar-ma":6379,"./ar-ma.js":6379,"./ar-sa":7700,"./ar-sa.js":7700,"./ar-tn":2059,"./ar-tn.js":2059,"./ar.js":902,"./az":6043,"./az.js":6043,"./be":7936,"./be.js":7936,"./bg":4078,"./bg.js":4078,"./bm":4014,"./bm.js":4014,"./bn":9554,"./bn-bd":7114,"./bn-bd.js":7114,"./bn.js":9554,"./bo":6529,"./bo.js":6529,"./br":5437,"./br.js":5437,"./bs":9647,"./bs.js":9647,"./ca":9951,"./ca.js":9951,"./cs":6113,"./cs.js":6113,"./cv":7965,"./cv.js":7965,"./cy":5858,"./cy.js":5858,"./da":3515,"./da.js":3515,"./de":2831,"./de-at":6263,"./de-at.js":6263,"./de-ch":1127,"./de-ch.js":1127,"./de.js":2831,"./dv":4510,"./dv.js":4510,"./el":8616,"./el.js":8616,"./en-au":4595,"./en-au.js":4595,"./en-ca":3545,"./en-ca.js":3545,"./en-gb":9609,"./en-gb.js":9609,"./en-ie":3727,"./en-ie.js":3727,"./en-il":3302,"./en-il.js":3302,"./en-in":6305,"./en-in.js":6305,"./en-nz":9128,"./en-nz.js":9128,"./en-sg":4569,"./en-sg.js":4569,"./eo":650,"./eo.js":650,"./es":6358,"./es-do":4214,"./es-do.js":4214,"./es-mx":8639,"./es-mx.js":8639,"./es-us":232,"./es-us.js":232,"./es.js":6358,"./et":7279,"./et.js":7279,"./eu":5515,"./eu.js":5515,"./fa":7981,"./fa.js":7981,"./fi":7090,"./fi.js":7090,"./fil":9208,"./fil.js":9208,"./fo":2799,"./fo.js":2799,"./fr":3463,"./fr-ca":2213,"./fr-ca.js":2213,"./fr-ch":2848,"./fr-ch.js":2848,"./fr.js":3463,"./fy":1468,"./fy.js":1468,"./ga":8163,"./ga.js":8163,"./gd":2898,"./gd.js":2898,"./gl":6312,"./gl.js":6312,"./gom-deva":682,"./gom-deva.js":682,"./gom-latn":9178,"./gom-latn.js":9178,"./gu":1400,"./gu.js":1400,"./he":2795,"./he.js":2795,"./hi":7009,"./hi.js":7009,"./hr":6506,"./hr.js":6506,"./hu":9565,"./hu.js":9565,"./hy-am":3864,"./hy-am.js":3864,"./id":5626,"./id.js":5626,"./is":6649,"./is.js":6649,"./it":151,"./it-ch":5348,"./it-ch.js":5348,"./it.js":151,"./ja":9830,"./ja.js":9830,"./jv":3751,"./jv.js":3751,"./ka":3365,"./ka.js":3365,"./kk":5980,"./kk.js":5980,"./km":9571,"./km.js":9571,"./kn":5880,"./kn.js":5880,"./ko":6809,"./ko.js":6809,"./ku":6773,"./ku.js":6773,"./ky":5505,"./ky.js":5505,"./lb":553,"./lb.js":553,"./lo":1237,"./lo.js":1237,"./lt":1563,"./lt.js":1563,"./lv":1057,"./lv.js":1057,"./me":6495,"./me.js":6495,"./mi":3096,"./mi.js":3096,"./mk":3874,"./mk.js":3874,"./ml":6055,"./ml.js":6055,"./mn":7747,"./mn.js":7747,"./mr":7113,"./mr.js":7113,"./ms":8687,"./ms-my":7948,"./ms-my.js":7948,"./ms.js":8687,"./mt":4532,"./mt.js":4532,"./my":4655,"./my.js":4655,"./nb":6961,"./nb.js":6961,"./ne":2512,"./ne.js":2512,"./nl":8448,"./nl-be":2936,"./nl-be.js":2936,"./nl.js":8448,"./nn":9031,"./nn.js":9031,"./oc-lnc":5174,"./oc-lnc.js":5174,"./pa-in":118,"./pa-in.js":118,"./pl":3448,"./pl.js":3448,"./pt":3518,"./pt-br":2447,"./pt-br.js":2447,"./pt.js":3518,"./ro":817,"./ro.js":817,"./ru":262,"./ru.js":262,"./sd":8990,"./sd.js":8990,"./se":3842,"./se.js":3842,"./si":7711,"./si.js":7711,"./sk":756,"./sk.js":756,"./sl":3772,"./sl.js":3772,"./sq":6187,"./sq.js":6187,"./sr":732,"./sr-cyrl":5713,"./sr-cyrl.js":5713,"./sr.js":732,"./ss":9455,"./ss.js":9455,"./sv":9770,"./sv.js":9770,"./sw":959,"./sw.js":959,"./ta":6459,"./ta.js":6459,"./te":5302,"./te.js":5302,"./tet":7975,"./tet.js":7975,"./tg":1294,"./tg.js":1294,"./th":2385,"./th.js":2385,"./tk":4613,"./tk.js":4613,"./tl-ph":8668,"./tl-ph.js":8668,"./tlh":8190,"./tlh.js":8190,"./tr":4506,"./tr.js":4506,"./tzl":3440,"./tzl.js":3440,"./tzm":9852,"./tzm-latn":2350,"./tzm-latn.js":2350,"./tzm.js":9852,"./ug-cn":730,"./ug-cn.js":730,"./uk":99,"./uk.js":99,"./ur":2100,"./ur.js":2100,"./uz":6002,"./uz-latn":6322,"./uz-latn.js":6322,"./uz.js":6002,"./vi":4207,"./vi.js":4207,"./x-pseudo":4674,"./x-pseudo.js":4674,"./yo":570,"./yo.js":570,"./zh-cn":3644,"./zh-cn.js":3644,"./zh-hk":2591,"./zh-hk.js":2591,"./zh-mo":9503,"./zh-mo.js":9503,"./zh-tw":8080,"./zh-tw.js":8080};function s(e){var a=i(e);return o(a)}function i(e){if(!o.o(t,e)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t[e]}s.keys=function(){return Object.keys(t)},s.resolve=i,e.exports=s,s.id=6700},6868:function(e,a,o){"use strict";var t=o(9242),s=o(3396);const i={class:"estilos"},l={class:"menu"},r={class:"router"},n=(0,s._)("br",null,null,-1),c=(0,s._)("br",null,null,-1),d=(0,s._)("br",null,null,-1);function u(e,a,o,t,u,h){const p=(0,s.up)("NovoMenu"),m=(0,s.up)("router-view"),g=(0,s.up)("Footer");return(0,s.wg)(),(0,s.iD)("div",i,[(0,s._)("header",null,[(0,s._)("div",l,[e.$route.meta.hideMenu?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(p,{key:0}))])]),(0,s._)("div",r,[n,c,d,(0,s.Wm)(m)]),(0,s.Wm)(g)])}var h=o(7139);const p={class:"menu",id:"menu"},m={class:"navbar navbar-expand-lg navbar-light bg-dark",style:{color:"white"}},g=(0,s._)("a",{class:"navbar-brand",href:"/home"},[(0,s._)("img",{src:"https://roboflex.com.br/wp-content/uploads/2023/05/logotipo-roboflex.png",alt:"Logo",style:{width:"75%"}})],-1),w={class:"collapse navbar-collapse",id:"navbarNav"},f={class:"navbar-nav mx-auto"},b=["onMouseover"],_={class:"icons"},v={class:"navbar-nav ml-auto"},y=(0,s._)("i",{style:{color:"white"},class:"fa-solid fa-circle-user"},null,-1),C={class:"username",style:{color:"white"}},x=(0,s._)("span",{style:{color:"black"}},[(0,s._)("i",{class:"fa-solid fa-user-gear"}),(0,s.Uk)("  Alterar Senha")],-1),k=(0,s._)("span",{style:{color:"black"}},"Alterar empresa",-1),P={style:{"list-style":"none",margin:"0",padding:"0"}},S=["value"],D=(0,s._)("span",{style:{color:"black"}},[(0,s._)("i",{class:"fa-solid fa-right-from-bracket"}),(0,s.Uk)("  Logout")],-1),j={style:{color:"rgb(0, 0, 0)"}},q={style:{"list-style-type":"none"}},V=["href"];function M(e,a,o,i,l,r){const n=(0,s.up)("b-dropdown-item"),c=(0,s.up)("b-dropdown-divider"),d=(0,s.up)("b-nav-item-dropdown");return(0,s.wg)(),(0,s.iD)("div",p,[(0,s._)("nav",m,[g,(0,s._)("div",w,[(0,s._)("ul",f,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.menus,(e=>((0,s.wg)(),(0,s.iD)("button",{key:e.id,onMouseover:a=>r.activateMenu(e),class:(0,h.C_)(["btn menu-block text-white mb-2 mr-2",{active:e===l.activeMenu}]),style:(0,h.j5)({backgroundColor:e===l.activeMenu?"":"#343537"})},"    "+(0,h.zw)(e.nome),47,b)))),128))]),(0,s._)("div",_,[(0,s._)("div",v,[(0,s.Wm)(d,{right:"",style:{color:"white"}},{"button-content":(0,s.w5)((()=>[y,(0,s._)("span",C,"  Olá, "+(0,h.zw)(e.userName),1)])),default:(0,s.w5)((()=>[(0,s.Wm)(n,{style:{color:"black"},href:"/alterarSenha"},{default:(0,s.w5)((()=>[x])),_:1}),(0,s.Wm)(c),(0,s.Wm)(n,{style:{color:"black"},href:"/alterarSenha"},{default:(0,s.w5)((()=>[k,(0,s._)("ul",P,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.localData,(o=>((0,s.wg)(),(0,s.iD)("li",{key:o.local_nome},[(0,s.wy)((0,s._)("input",{type:"radio",value:o.id,"onUpdate:modelValue":a[0]||(a[0]=a=>e.localSelecionado=a),onChange:a[1]||(a[1]=(...a)=>e.salvarLocalSelecionado&&e.salvarLocalSelecionado(...a)),style:{"margin-right":"5px"}},null,40,S),[[t.G2,e.localSelecionado]]),(0,s._)("span",null,(0,h.zw)(o.local_nome),1)])))),128))])])),_:1}),(0,s.Wm)(n,{style:{color:"black"},onClick:r.logout},{default:(0,s.w5)((()=>[D])),_:1},8,["onClick"])])),_:1})])])])]),l.activeMenu?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"menunovo",onMouseleave:a[2]||(a[2]=(...e)=>r.closeContent&&r.closeContent(...e))},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.activeMenu.filho,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.id},[(0,s._)("h6",j,(0,h.zw)(e.nome),1),(0,s._)("ul",q,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.filho,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e.id},[(0,s._)("a",{href:e.url,style:{"text-decoration":"none",color:"rgb(0, 0, 0)"},class:"submenu-link"},(0,h.zw)(e.nome),9,V)])))),128))])])))),128))],32)):(0,s.kq)("",!0)])}o(560);var E=o(1076);class N{constructor(e){e=e||{},this.id=e.id,this.nome=e.nome,this.url=e.URL,this.sistema_id=e.sistema_id,this.menu_pai=e.menu_pai,this.filho=[],Array.isArray(e.filho)&&(this.filho=e.filho.map((e=>{const a=new N(e);return a.idFilho=e.id,a.nomeFilho=e.nome,a})))}}var L={name:"TesteMenuView",data(){return{activeMenu:"",home:"",estruturaCortada:"",botoes:"#343537",menus:"",adm:"",fabrica:"",gestao:""}},methods:{getAllHome(){E.Z.get("http://192.168.0.6:8000/api/menu/home").then((e=>{this.home=e.data.data.map((e=>new N(e)))}))},getAllEstrutura(){E.Z.get("http://192.168.0.6:8000/api/menu/estrutura").then((e=>{this.menus=e.data.data.map((e=>new N(e)))}))},getAllAdm(){E.Z.get("http://192.168.0.6:8000/api/menu/estrutura/25").then((e=>{this.adm=e.data.data.map((e=>new N(e)))}))},getAllFab(){E.Z.get("http://192.168.0.6:8000/api/menu/estrutura/44").then((e=>{this.fabrica=e.data.data.map((e=>new N(e)))}))},getAllGestao(){E.Z.get("http://192.168.0.6:8000/api/menu/estrutura/52").then((e=>{this.gestao=e.data.data.map((e=>new N(e)))}))},activateMenu(e){this.activeMenu=e,this.menus.forEach((a=>{a.active=a===e})),e.submenus&&e.submenus.length>0?this.activateSubMenu(e.submenus[0]):(this.showSidebar=!1,this.sideBarMenus=[])},logout(){const e=localStorage.getItem("token");E.Z.post("http://192.168.0.6:8000/api/logout",{},{headers:{Authorization:`Bearer ${e}`}}).then((()=>{this.$router.push("/"),localStorage.removeItem("token"),localStorage.removeItem("userName")})).catch((e=>{console.error("Logout failed:",e)}))},closeContent(){this.activeMenu=null}},created(){this.userName=localStorage.getItem("userName")},mounted(){this.getAllHome(),this.getAllEstrutura()}},z=o(89);const F=(0,z.Z)(L,[["render",M]]);var U=F;const A=e=>((0,s.dD)("data-v-3df569e7"),e=e(),(0,s.Cn)(),e),I=A((()=>(0,s._)("div",{class:"text-center p-3"}," © 2023 Copyright: Zontec ",-1))),R=[I];function O(e,a,o,t,i,l){return(0,s.wg)(),(0,s.iD)("footer",{class:(0,h.C_)(["footer",i.responsiveClass])},R,2)}var $={data(){return{responsiveClass:"lg-start"}},computed:{windowWidth(){return window.innerWidth}},watch:{windowWidth(e){this.setResponsiveClass(e)}},mounted(){this.setResponsiveClass(this.windowWidth),window.addEventListener("resize",this.handleResize)},beforeUnmount(){window.removeEventListener("resize",this.handleResize)},methods:{handleResize(){this.setResponsiveClass(this.windowWidth)},setResponsiveClass(e){this.responsiveClass=e<577?"center":"lg-start"}}};const W=(0,z.Z)($,[["render",O],["__scopeId","data-v-3df569e7"]]);var H=W,T={data(){return{}},components:{NovoMenu:U,Footer:H}};const Y=(0,z.Z)(T,[["render",u]]);var Z=Y,B=o(2483),G=o.p+"img/thalamus-logo.3384e7fb.png";const K=e=>((0,s.dD)("data-v-05aa08db"),e=e(),(0,s.Cn)(),e),Q={class:"box-login"},J=K((()=>(0,s._)("div",{style:{"text-align":"center"}},[(0,s._)("img",{class:"logo",src:G,width:"150px"}),(0,s._)("br"),(0,s._)("br")],-1))),X={class:"input-group mb-1"},ee=K((()=>(0,s._)("div",{class:"input-group-prepend"},[(0,s._)("span",{class:"input-group-text"},[(0,s._)("i",{class:"fa-solid fa-envelope"})])],-1))),ae={class:"input-group mb-1"},oe=K((()=>(0,s._)("div",{class:"input-group-prepend"},[(0,s._)("span",{class:"input-group-text"},[(0,s._)("i",{class:"fa-solid fa-lock"})])],-1))),te=K((()=>(0,s._)("br",null,null,-1))),se={class:"form-check"},ie={style:{"list-style":"none",margin:"0",padding:"0"}},le=["value"],re=K((()=>(0,s._)("br",null,null,-1))),ne={class:"col-sm-12 text-center"},ce={class:"button-default",value:"Entrar"},de={key:0,class:"fas fa-spinner fa-spin"},ue={key:1},he={key:2},pe=K((()=>(0,s._)("div",{class:"col-sm-12",style:{"text-align":"center","font-size":"15px"}},[(0,s._)("a",{href:"/esqueceuSenha",style:{color:"rgb(0, 0, 0)"}},"Esqueceu sua senha ?")],-1)));function me(e,a,o,i,l,r){return(0,s.wg)(),(0,s.iD)("form",{onSubmit:a[4]||(a[4]=(0,t.iM)(((...e)=>r.login&&r.login(...e)),["prevent"])),class:"container"},[(0,s._)("div",Q,[J,(0,s._)("div",X,[ee,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[0]||(a[0]=e=>l.email=e),placeholder:"roboflex@roboflex.com.br"},null,512),[[t.nr,l.email]])]),(0,s._)("div",ae,[oe,(0,s.wy)((0,s._)("input",{type:"password",class:"form-control","onUpdate:modelValue":a[1]||(a[1]=e=>l.password=e),placeholder:"12345678"},null,512),[[t.nr,l.password]])]),te,(0,s._)("div",se,[(0,s._)("ul",ie,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.localData,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e.local_nome},[(0,s.wy)((0,s._)("input",{type:"radio",value:e.id,"onUpdate:modelValue":a[2]||(a[2]=e=>l.localSelecionado=e),onChange:a[3]||(a[3]=(...e)=>r.salvarLocalSelecionado&&r.salvarLocalSelecionado(...e)),style:{"margin-right":"5px"}},null,40,le),[[t.G2,l.localSelecionado]]),(0,s._)("span",null,(0,h.zw)(e.local_nome),1)])))),128))])]),re,(0,s._)("div",ne,[(0,s._)("button",ce,[l.loading?((0,s.wg)(),(0,s.iD)("i",de)):(0,s.kq)("",!0),(0,s.Uk)("   "),l.loading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("span",ue,"Entrar")),l.loading?((0,s.wg)(),(0,s.iD)("span",he,"Processando...")):(0,s.kq)("",!0)])]),pe])],32)}var ge=o(1417);const we="http://192.168.0.6:8000/api",fe="http://192.168.0.6:8082",be=E.Z.create({baseURL:we,devURL:fe}),_e={caminhoFoto:"http://192.168.0.6:8000/storage/"};var ve=be;const ye=(0,ge.RN)({position:"top-right",duration:"4000"});var Ce={name:"LoginComponent",components:{},data(){return{local:"",email:"",password:"",token:"",id:"",loading:!1,user:null,localData:[],localSelecionado:null,apiUrl:ve.defaults.baseURL}},mounted(){this.buscaLocal(),localStorage.local&&(this.local=localStorage.local)},watch:{local(e){localStorage.local=e}},methods:{login(){this.email||ye.show("Por favor, preencha o e-mail",{type:"error"}),this.password||ye.show("Por favor, preencha a senha",{type:"error"}),E.Z.post("http://192.168.0.6:8000/api/login",{email:this.email,password:this.password}).then((e=>{this.id=e.data.user.id,this.user=e.data.user.name,localStorage.setItem("userName",this.user),localStorage.setItem("token",e.data.token),this.loading=!1,this.$router.push({name:"HomeView"})})).catch((e=>{this.email="",this.password="",console.log(e),ye.show("E-mail e/ou senha estão incorretos!",{type:"error"})}))},async buscaLocal(){try{const e=await fetch(`${this.apiUrl}/local`);this.localData=await e.json()}catch(e){console.error("Error ao buscar empresas",e),ye.show("Erro buscar empresa",{type:"error"})}},salvarLocalSelecionado(){localStorage.setItem("localSelecionado",this.localSelecionado)}}};const xe=(0,z.Z)(Ce,[["render",me],["__scopeId","data-v-05aa08db"]]);var ke=xe;const Pe=e=>((0,s.dD)("data-v-00df634a"),e=e(),(0,s.Cn)(),e),Se={class:"home"},De={class:"navbar navbar-expand-lg navbar-light bg-dark",style:{color:"white","text-align":"center","margin-left":"0px"}},je=Pe((()=>(0,s._)("a",{class:"navbar-brand",href:"#"},[(0,s._)("img",{src:"https://roboflex.com.br/wp-content/uploads/2023/05/logotipo-roboflex.png",alt:"Logo",style:{width:"75%"}})],-1))),qe=Pe((()=>(0,s._)("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,s._)("span",{class:"navbar-toggler-icon"})],-1))),Ve={class:"navbar-nav ml-auto"},Me=Pe((()=>(0,s._)("i",{style:{color:"white"},class:"fa-solid fa-circle-user"},null,-1))),Ee={class:"username",style:{color:"white"}},Ne=Pe((()=>(0,s._)("span",{style:{color:"black"}},[(0,s._)("i",{class:"fa-solid fa-user-gear"}),(0,s.Uk)("  Alterar Senha")],-1))),Le=Pe((()=>(0,s._)("span",{style:{color:"black"}},[(0,s._)("i",{class:"fa-solid fa-right-from-bracket"}),(0,s.Uk)("  Logout")],-1))),ze=(0,s.uE)('<div style="left:0px;" data-v-00df634a><div class="three-columns" style="justify-content:center;color:white;text-align:center;" data-v-00df634a><div class="column" id="column1" data-v-00df634a><br data-v-00df634a><br data-v-00df634a></div><div class="column" id="column2" data-v-00df634a><br data-v-00df634a><br data-v-00df634a></div><div class="column" id="column3" data-v-00df634a><br data-v-00df634a><br data-v-00df634a></div></div></div>',1);function Fe(e,a,o,t,i,l){const r=(0,s.up)("b-dropdown-item"),n=(0,s.up)("b-nav-item-dropdown");return(0,s.wg)(),(0,s.iD)("div",Se,[(0,s._)("nav",De,[je,qe,(0,s._)("div",Ve,[(0,s.Wm)(n,{right:""},{"button-content":(0,s.w5)((()=>[Me,(0,s._)("span",Ee,"  Olá, "+(0,h.zw)(e.userName),1)])),default:(0,s.w5)((()=>[(0,s.Wm)(r,{style:{color:"black"},href:"/alterarSenha"},{default:(0,s.w5)((()=>[Ne])),_:1}),(0,s.Wm)(r,{style:{color:"black"},onClick:l.logout},{default:(0,s.w5)((()=>[Le])),_:1},8,["onClick"])])),_:1})])]),ze])}var Ue={name:"Home3Component",components:{},methods:{logout(){const e=localStorage.getItem("token");E.Z.post("http://192.168.0.6:8000/api/logout",{},{headers:{Authorization:`Bearer ${e}`}}).then((()=>{this.$router.push("/"),localStorage.removeItem("token"),localStorage.removeItem("userName")})).catch((e=>{console.error("Logout failed:",e)}))},closeContent(){this.activeMenu=null}},created(){this.userName=localStorage.getItem("userName")}};const Ae=(0,z.Z)(Ue,[["render",Fe],["__scopeId","data-v-00df634a"]]);var Ie=Ae;const Re=e=>((0,s.dD)("data-v-66a10800"),e=e(),(0,s.Cn)(),e),Oe={class:"container"},$e={class:"box-login"},We=Re((()=>(0,s._)("div",{style:{"text-align":"center"}},[(0,s._)("h4",{class:"titulo"}," Esqueceu sua Senha ? ")],-1))),He=Re((()=>(0,s._)("hr",null,null,-1))),Te=Re((()=>(0,s._)("br",null,null,-1))),Ye=Re((()=>(0,s._)("label",{style:{"text-align":"center"}},"Informe o e-mail para o qual deseja redefinir sua senha",-1))),Ze=Re((()=>(0,s._)("br",null,null,-1))),Be=Re((()=>(0,s._)("br",null,null,-1))),Ge=Re((()=>(0,s._)("i",{class:"fa-solid fa-envelope"},null,-1))),Ke={key:0,class:"fa-solid fa-paper-plane","aria-hidden":"true"},Qe={key:1,class:"fas fa-spinner fa-spin"},Je={key:2},Xe={key:3},ea={key:0,style:{"text-align":"center"}},aa=Re((()=>(0,s._)("br",null,null,-1))),oa=[aa],ta=Re((()=>(0,s._)("br",null,null,-1))),sa=Re((()=>(0,s._)("br",null,null,-1))),ia=Re((()=>(0,s._)("label",{style:{"text-align":"center",color:"rgb(116, 112, 112)"}},"Você receberá um código token por e-mail para cadastrar uma nova senha",-1)));function la(e,a,o,t,i,l){const r=(0,s.up)("b-input-group-prepend"),n=(0,s.up)("b-form-input"),c=(0,s.up)("b-input-group-append"),d=(0,s.up)("b-input-group");return(0,s.wg)(),(0,s.iD)("div",Oe,[(0,s._)("div",$e,[We,He,Te,Ye,Ze,Be,(0,s.Wm)(d,{class:"mb-2"},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{"is-text":""},{default:(0,s.w5)((()=>[Ge])),_:1}),(0,s.Wm)(n,{type:"text",placeholder:"Digite seu e-mail",modelValue:i.email,"onUpdate:modelValue":a[0]||(a[0]=e=>i.email=e)},null,8,["modelValue"]),(0,s.Wm)(c)])),_:1}),(0,s._)("button",{class:"button-default",onClick:a[1]||(a[1]=(...e)=>l.resetarSenha&&l.resetarSenha(...e)),type:"button"},[i.loading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("i",Ke)),i.loading?((0,s.wg)(),(0,s.iD)("i",Qe)):(0,s.kq)("",!0),(0,s.Uk)("   "),i.loading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("span",Je,"Enviar código de recuperação")),i.loading?((0,s.wg)(),(0,s.iD)("span",Xe,"Enviando...")):(0,s.kq)("",!0)]),i.loading?((0,s.wg)(),(0,s.iD)("div",ea,oa)):(0,s.kq)("",!0),ta,sa,ia])])}const ra=(0,ge.RN)({position:"top-right",duration:"4000"});var na={name:"EsqueceuSenhaComponent",components:{},data(){return{email:"",loading:!1}},methods:{resetarSenha(){this.loading=!0,this.email||ra.show("Por favor, preencha o e-mail",{type:"error"}),E.Z.post("http://192.168.0.6:8000/api/enviar-codigo",{email:this.email}).then((e=>{ra.show("E-mail enviado com sucesso!",{type:"success"}),this.$router.push({name:"ValidarSenha"}),this.loading=!1,this.email="",console.log(e)})).catch((e=>{this.loading=!1,this.email="",console.log(e),ra.show("E-mail não cadastrado ou incorreto",{type:"error"})}))}}};const ca=(0,z.Z)(na,[["render",la],["__scopeId","data-v-66a10800"]]);var da=ca;const ua=e=>((0,s.dD)("data-v-215747cc"),e=e(),(0,s.Cn)(),e),ha={class:"container"},pa={class:"box-login"},ma={style:{"text-align":"right"}},ga={key:0},wa=["icon"],fa=ua((()=>(0,s._)("br",null,null,-1))),ba=ua((()=>(0,s._)("div",{style:{"text-align":"center"}},[(0,s._)("h4",{class:"titulo"}," Validação de Token ")],-1))),_a=ua((()=>(0,s._)("hr",null,null,-1))),va=ua((()=>(0,s._)("label",{style:{"text-align":"center"}},"Insira o código token que você recebeu por E-mail ",-1))),ya=ua((()=>(0,s._)("br",null,null,-1))),Ca=ua((()=>(0,s._)("br",null,null,-1))),xa={class:"input-group mb-3"},ka=ua((()=>(0,s._)("div",{class:"input-group-prepend"},[(0,s._)("span",{class:"input-group-text",id:"basic-addon1"},[(0,s._)("i",{class:"fa-solid fa-user-lock"})])],-1))),Pa=["disabled"],Sa={key:0,class:"fa-solid fa-key","aria-hidden":"true"},Da={key:1,class:"fas fa-spinner fa-spin"},ja={key:2},qa={key:3},Va={key:1},Ma=ua((()=>(0,s._)("br",null,null,-1))),Ea=ua((()=>(0,s._)("br",null,null,-1))),Na={class:"input-group mb-3"},La=ua((()=>(0,s._)("div",{class:"input-group-prepend"},[(0,s._)("span",{class:"input-group-text",id:"basic-addon1"},[(0,s._)("i",{class:"fa-solid fa-lock"})])],-1))),za=["type"],Fa={class:"input-group mb-3"},Ua=ua((()=>(0,s._)("div",{class:"input-group-prepend"},[(0,s._)("span",{class:"input-group-text",id:"basic-addon1"},[(0,s._)("i",{class:"fa-solid fa-lock"})])],-1))),Aa=["type"],Ia={key:0,class:"matches",style:{color:"red","text-align":"center"}},Ra=ua((()=>(0,s._)("p",null,"A senhas não conferem!",-1))),Oa=[Ra],$a={key:0,icon:"check-circle-fill","aria-hidden":"true"},Wa={key:1,class:"fas fa-spinner fa-spin"},Ha={key:2},Ta={key:3},Ya={key:0,class:"hints"},Za=ua((()=>(0,s._)("hr",null,null,-1)));function Ba(e,a,o,i,l,r){const n=(0,s.up)("b-button");return(0,s.wg)(),(0,s.iD)("div",ha,[(0,s._)("div",pa,[(0,s._)("div",ma,[l.codigoValido?((0,s.wg)(),(0,s.iD)("div",ga,[(0,s.Wm)(n,{variant:"outline-secondary",onClick:r.toggleShowPassword},{default:(0,s.w5)((()=>[(0,s._)("i",{class:"fa-solid fa-eye",icon:l.showNewPassword?"fa-solid fa-eye":"fa-solid fa-eye-slash"},null,8,wa)])),_:1},8,["onClick"])])):(0,s.kq)("",!0)]),fa,ba,_a,va,ya,Ca,(0,s._)("div",xa,[ka,(0,s.wy)((0,s._)("input",{type:"number",class:"form-control",disabled:l.codigoValido,placeholder:"Digite o código do e-mail","onUpdate:modelValue":a[0]||(a[0]=e=>l.codigo=e)},null,8,Pa),[[t.nr,l.codigo]])]),l.codigoValido?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:a[1]||(a[1]=(...e)=>r.validarCodigo&&r.validarCodigo(...e)),class:"b-button"},[l.loading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("i",Sa)),(0,s.Uk)("   "),l.loading?((0,s.wg)(),(0,s.iD)("i",Da)):(0,s.kq)("",!0),l.loading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("span",ja,"Verificar ")),l.loading?((0,s.wg)(),(0,s.iD)("span",qa,"   Verificando...")):(0,s.kq)("",!0)])),l.codigoValido?((0,s.wg)(),(0,s.iD)("div",Va,[Ma,Ea,(0,s._)("div",Na,[La,(0,s.wy)((0,s._)("input",{class:"form-control",type:l.showNewPassword?"text":"password",ref:"newPasswordInput",placeholder:"Nova Senha","onUpdate:modelValue":a[2]||(a[2]=e=>l.new_password=e)},null,8,za),[[t.YZ,l.new_password]])]),(0,s._)("div",Fa,[Ua,(0,s.wy)((0,s._)("input",{class:"form-control",type:l.showPasswordConf?"text":"password",ref:"newPasswordConfInput",placeholder:"Repita a Nova Senha","onUpdate:modelValue":a[3]||(a[3]=e=>l.new_password_confirmation=e)},null,8,Aa),[[t.YZ,l.new_password_confirmation]])]),r.notSamePasswords?((0,s.wg)(),(0,s.iD)("div",Ia,Oa)):(0,s.kq)("",!0),r.passwordsFilled&&!r.notSamePasswords&&r.passwordValidation.valid?((0,s.wg)(),(0,s.iD)("button",{key:1,onClick:a[4]||(a[4]=(...e)=>r.resetarSenha&&r.resetarSenha(...e))},[l.loading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("i",$a)),l.loading?((0,s.wg)(),(0,s.iD)("i",Wa)):(0,s.kq)("",!0),(0,s.Uk)("   "),l.loading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("span",Ha,"Resetar Senha")),l.loading?((0,s.wg)(),(0,s.iD)("span",Ta,"Resetando...")):(0,s.kq)("",!0)])):(0,s.kq)("",!0),(0,s.Wm)(t.uT,{name:"hint",appear:""},{default:(0,s.w5)((()=>[r.passwordValidation.errors.length>0&&!l.submitted?((0,s.wg)(),(0,s.iD)("div",Ya,[Za,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.passwordValidation.errors,(e=>((0,s.wg)(),(0,s.iD)("p",{style:{color:"green"},key:e.id},(0,h.zw)(e),1)))),128))])):(0,s.kq)("",!0)])),_:1})])):(0,s.kq)("",!0)])])}const Ga=(0,ge.RN)({position:"top-right",duration:"4000"});var Ka={name:"ValidarSenhaComponent",components:{},data(){return{codigo:"",new_password:"",new_password_confirmation:"",erroCodigo:!1,codigoValido:!1,loading:!1,submitted:!1,showNewPassword:!1,showPasswordConf:!1,rules:[{message:"- Minimo de 1 Letra Maiúscula",regex:/[A-Z]+/},{message:"- Mínimo de 6 caracteres",regex:/.{6,}/},{message:"- Minímo de 1 número",regex:/[0-9]+/},{message:"- Mínimo de 1 caracter especial (ex: @ ! , . * -)",regex:/[^a-zA-Z 0-9]+/g}]}},watch:{},methods:{toggleShowPassword(e){"new"===e?this.showNewPassword=!this.showNewPassword:"confirmation"===e&&(this.showPasswordConf=!this.showPasswordConf),this.showNewPassword=!this.showNewPassword,this.showPasswordConf=!this.showPasswordConf},validarCodigo(){this.loading=!0,this.codigo||(this.loading=!1,Ga.show("Por favor, preencha o código do e-mail",{type:"error"})),E.Z.post("http://192.168.0.6:8000/api/validar-codigo",{codigo:this.codigo}).then((e=>{0===e.data?(this.erroCodigo=!0,this.codigo="",this.loading=!1,Ga.show("Código incorreto ou inválido!",{type:"error"})):1===e.data&&(this.erroCodigo=!1,this.codigoValido=!0,this.loading=!1,Ga.show("Código validado com sucesso!",{type:"success"}))})).catch((e=>{console.error(e)}))},resetarSenha(){return this.loading=!0,this.new_password&&this.new_password_confirmation?void(this.new_password===this.new_password_confirmation?(this.validationState=!0,E.Z.post("http://192.168.0.6:8000/api/redefinir-senha",{codigo:this.codigo,new_password:this.new_password,new_password_confirmation:this.new_password_confirmation}).then((e=>{this.codigo="",this.new_password="",this.new_password_confirmation="",this.loading=!1,Ga.show("Senha resetada com sucesso!",{type:"success"}),this.$router.push({name:"HomeView"}),console.log(e)})).catch((e=>{this.loading=!1,this.validationState=!1,Ga.show("Erro ao refenir senha!",{type:"error"}),console.error("Erro ao redefinir a senha:",e)}))):(this.loading=!1,this.new_password="",this.new_password_confirmation="")):(this.loading=!1,void Ga.show("Por favor, preencha a senha",{type:"error"}))}},computed:{notSamePasswords(){return!!this.passwordsFilled&&this.new_password!==this.new_password_confirmation},passwordsFilled(){return""!==this.new_password&&""!==this.new_password_confirmation},passwordValidation(){let e=[];for(let a of this.rules)a.regex.test(this.new_password)||e.push(a.message);return 0===e.length?{valid:!0,errors:e}:{valid:!1,errors:e}}}};const Qa=(0,z.Z)(Ka,[["render",Ba],["__scopeId","data-v-215747cc"]]);var Ja=Qa;const Xa=e=>((0,s.dD)("data-v-c9899fba"),e=e(),(0,s.Cn)(),e),eo={class:"container"},ao=Xa((()=>(0,s._)("br",null,null,-1))),oo={class:"box-login"},to={style:{"text-align":"right"}},so=["icon"],io=Xa((()=>(0,s._)("br",null,null,-1))),lo=Xa((()=>(0,s._)("h4",{class:"titulo"},[(0,s.Uk)(" Alterar Senha "),(0,s._)("i",{class:"fa-solid fa-lock"})],-1))),ro=Xa((()=>(0,s._)("hr",null,null,-1))),no=Xa((()=>(0,s._)("i",{class:"fa-solid fa-lock"},null,-1))),co=Xa((()=>(0,s._)("i",{class:"fa-solid fa-lock"},null,-1))),uo=Xa((()=>(0,s._)("i",{class:"fa-solid fa-lock"},null,-1))),ho={key:0,class:"matches",style:{color:"red","text-align":"center"}},po=Xa((()=>(0,s._)("p",null,"A senhas não conferem!",-1))),mo=[po],go=Xa((()=>(0,s._)("br",null,null,-1))),wo=Xa((()=>(0,s._)("br",null,null,-1))),fo={key:0,class:"hints"},bo=Xa((()=>(0,s._)("hr",null,null,-1))),_o={key:1,class:"fas fa-spinner fa-spin"},vo={key:2},yo={key:3},Co=Xa((()=>(0,s._)("br",null,null,-1))),xo=Xa((()=>(0,s._)("br",null,null,-1))),ko=Xa((()=>(0,s._)("br",null,null,-1))),Po=Xa((()=>(0,s._)("br",null,null,-1))),So=Xa((()=>(0,s._)("br",null,null,-1)));function Do(e,a,o,i,l,r){const n=(0,s.up)("b-button"),c=(0,s.up)("b-input-group-prepend"),d=(0,s.up)("b-form-input"),u=(0,s.up)("b-input-group-append"),p=(0,s.up)("b-input-group"),m=(0,s.up)("b-icon");return(0,s.wg)(),(0,s.iD)("div",eo,[ao,(0,s._)("div",oo,[(0,s._)("div",to,[(0,s.Wm)(n,{variant:"outline-secondary",onClick:r.toggleShowPassword},{default:(0,s.w5)((()=>[(0,s._)("i",{class:"fa-solid fa-eye",icon:l.showNewPassword?"fa-solid fa-eye":"fa-solid fa-eye-slash"},null,8,so)])),_:1},8,["onClick"])]),io,lo,ro,(0,s.Wm)(p,{class:"mb-2"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{"is-text":""},{default:(0,s.w5)((()=>[no])),_:1}),(0,s.Wm)(d,{type:l.showCurrentPassword?"text":"password",ref:"currentInput",placeholder:"Senha Atual",modelValue:l.current_password,"onUpdate:modelValue":a[0]||(a[0]=e=>l.current_password=e)},null,8,["type","modelValue"]),(0,s.Wm)(u)])),_:1}),(0,s.Wm)(p,{class:"mb-2"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{"is-text":""},{default:(0,s.w5)((()=>[co])),_:1}),(0,s.Wm)(d,{type:l.showNewPassword?"text":"password",placeholder:"Nova Senha",modelValue:l.new_password,"onUpdate:modelValue":a[1]||(a[1]=e=>l.new_password=e)},null,8,["type","modelValue"]),(0,s.Wm)(u)])),_:1}),(0,s.Wm)(p,{class:"mb-2"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{"is-text":""},{default:(0,s.w5)((()=>[uo])),_:1}),(0,s.Wm)(d,{type:l.showNewPasswordConf?"text":"password",state:e.validationState,placeholder:"Repita a Nova Senha",modelValue:l.new_password_confirmation,"onUpdate:modelValue":a[2]||(a[2]=e=>l.new_password_confirmation=e)},null,8,["type","state","modelValue"])])),_:1}),r.notSamePasswords?((0,s.wg)(),(0,s.iD)("div",ho,mo)):(0,s.kq)("",!0),go,wo,(0,s.Wm)(t.uT,{name:"hint",appear:""},{default:(0,s.w5)((()=>[r.passwordValidation.errors.length>0&&!l.submitted?((0,s.wg)(),(0,s.iD)("div",fo,[bo,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.passwordValidation.errors,(e=>((0,s.wg)(),(0,s.iD)("p",{style:{color:"green"},key:e.id},(0,h.zw)(e),1)))),128))])):(0,s.kq)("",!0)])),_:1}),r.passwordsFilled&&!r.notSamePasswords&&r.passwordValidation.valid?((0,s.wg)(),(0,s.j4)(n,{key:1,onClick:r.resetPassword,class:"b-button"},{default:(0,s.w5)((()=>[l.loading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(m,{key:0,icon:"check-circle-fill","aria-hidden":"true"})),l.loading?((0,s.wg)(),(0,s.iD)("i",_o)):(0,s.kq)("",!0),(0,s.Uk)("   "),l.loading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("span",vo,"Salvar ")),l.loading?((0,s.wg)(),(0,s.iD)("span",yo,"Salvando...")):(0,s.kq)("",!0)])),_:1},8,["onClick"])):(0,s.kq)("",!0)]),Co,xo,ko,Po,So])}class jo{constructor(e){e=e||{},this.current_password=e.current_password,this.new_password=e.new_password,this.new_password_confirmation=e.new_password_confirmation}}const qo=(0,ge.RN)({position:"top-right",duration:"4000"});var Vo={name:"AlterarSenhaComponent",components:{},data(){return{senha:new jo,loading:!1,current_password:"",new_password:"",new_password_confirmation:"",reset_token:"",submitted:!1,showCurrentPassword:!1,showNewPassword:!1,showNewPasswordConf:!1,rules:[{message:"- Minimo de 1 Letra Maiúscula",regex:/[A-Z]+/},{message:"- Mínimo de 6 caracteres",regex:/.{6,}/},{message:"- Minímo de 1 número",regex:/[0-9]+/},{message:"- Mínimo de 1 caracter especial (ex: @ ! , . * -)",regex:/[^a-zA-Z 0-9]+/g}]}},methods:{toggleShowPassword(e){"current"===e?this.showCurrentPassword=!this.showCurrentPassword:"new"===e?this.showNewPassword=!this.showNewPassword:"confirmation"===e&&(this.showNewPasswordConf=!this.showNewPasswordConf),this.showCurrentPassword=!this.showCurrentPassword,this.showNewPassword=!this.showNewPassword,this.showNewPasswordConf=!this.showNewPasswordConf},resetPassword(){if(this.loading=!0,this.validationState=!0,!this.current_password)return this.loading=!1,void qo.show("Por favor, preencha a senha atual",{type:"error"});this.new_password===this.new_password_confirmation?(this.reset_token=localStorage.getItem("token"),console.log(this.reset_token),E.Z.post("http://192.168.0.6:8000/api/usuario/senha/alterar",{current_password:this.current_password,new_password:this.new_password,new_password_confirmation:this.new_password_confirmation},{headers:{Authorization:`Bearer ${this.reset_token}`}}).then((e=>{this.current_password="",this.new_password="",this.new_password_confirmation="",this.loading=!1,qo.show("Senha alterada com sucesso!",{type:"success"}),this.$router.push({name:"HomeView"}),console.log(e)})).catch((e=>{this.loading=!1,qo.show("Erro ao alterar senha",{type:"error"}),console.error(e)}))):(this.loading=!1,this.new_password="",this.new_password_confirmation="",this.current_password="")}},computed:{notSamePasswords(){return!!this.passwordsFilled&&this.new_password!==this.new_password_confirmation},passwordsFilled(){return""!==this.new_password&&""!==this.new_password_confirmation},passwordValidation(){let e=[];for(let a of this.rules)a.regex.test(this.new_password)||e.push(a.message);return 0===e.length?{valid:!0,errors:e}:{valid:!1,errors:e}}}};const Mo=(0,z.Z)(Vo,[["render",Do],["__scopeId","data-v-c9899fba"]]);var Eo=Mo,No=o.p+"img/user-avatar.95df8f4b.png";const Lo={class:"container"},zo=(0,s._)("div",{style:{"text-align":"center"}},[(0,s._)("h2",{class:"titulo"},"Acessos Recentes"),(0,s._)("hr")],-1),Fo={class:"d-flex row flex-wrap"},Uo={class:"col-lg-6 col-md-12"},Ao={class:"auto p-4"},Io={style:{display:"flex","flex-flow":"row","align-items":"baseline"}},Ro=(0,s._)("label",{style:{"margin-right":"10px"}},"Empresa: ",-1),Oo=["value"],$o={class:"input-group mt-3 mb-4"},Wo=(0,s._)("div",{class:"input-group-prepend"},[(0,s._)("span",{class:"input-group-text"},[(0,s._)("i",{class:"fa-solid fa-magnifying-glass"})])],-1),Ho={style:{"max-height":"600px","margin-top":"10px"}},To={class:"table"},Yo=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"Nome"),(0,s._)("th",null,"Data/Hora"),(0,s._)("th",{style:{"text-align":"center"}},"Entrada/Saída"),(0,s._)("th",null,"Empresa")])],-1),Zo={style:{"text-align":"center"}},Bo={key:0,class:"material-symbols-outlined",style:{color:"#388E3C"}},Go={key:1,class:"material-symbols-outlined",style:{color:"#E53935"}},Ko={class:"pagination"},Qo=(0,s._)("span",{"aria-hidden":"true"},"«",-1),Jo=[Qo],Xo=["onClick"],et=(0,s._)("span",{"aria-hidden":"true"},"»",-1),at=[et],ot={class:"col-lg-5 col-md-12"},tt={class:"d-flex row",style:{border:"solid 1px lightgray","border-radius":"20px","margin-top":"70px","margin-bottom":"20px","margin-left":"20px","margin-right":"20px"}},st=["src"],it={key:1,src:No,alt:"Foto Acesso",style:{"object-fit":"contain"}},lt={key:0,class:"d-flex justify-content-center"},rt=(0,s._)("p",{style:{color:"green"}},"Acesso permitido",-1),nt=[rt],ct=(0,s._)("br",null,null,-1),dt=(0,s._)("br",null,null,-1),ut=(0,s._)("br",null,null,-1);function ht(e,a,o,i,l,r){const n=(0,s.up)("MenuLSGP");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(n),(0,s._)("div",Lo,[zo,(0,s._)("div",Fo,[(0,s._)("div",Uo,[(0,s._)("div",Ao,[(0,s._)("div",Io,[Ro,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>l.localSelecionado=e),onChange:a[1]||(a[1]=(...e)=>r.alterarLocal&&r.alterarLocal(...e)),class:"select",style:{border:"solid","border-radius":"5px","border-width":"1px","border-color":"lightgrey",padding:"5px 10px 5px 10px"}},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.localData,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e.id,value:e.id},(0,h.zw)(e.local_nome),9,Oo)))),128))],544),[[t.bM,l.localSelecionado]])]),(0,s._)("div",$o,[Wo,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>l.filtroNome=e),onInput:a[3]||(a[3]=(...e)=>r.pesquisaComFiltro&&r.pesquisaComFiltro(...e)),type:"text",class:"form-control",placeholder:"Pesquisar acessos"},null,544),[[t.nr,l.filtroNome]])]),(0,s._)("div",Ho,[(0,s._)("table",To,[Yo,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.acessos,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("td",null,(0,h.zw)(e.nomeCompleto),1),(0,s._)("td",null,(0,h.zw)(r.formatarDataHora(e.created_at)),1),(0,s._)("td",Zo,["e"===e.sentido?((0,s.wg)(),(0,s.iD)("span",Bo,"login")):(0,s.kq)("",!0),"s"===e.sentido?((0,s.wg)(),(0,s.iD)("span",Go,"logout")):(0,s.kq)("",!0)]),(0,s._)("td",null,(0,h.zw)(e.local_nome),1)])))),128))])]),(0,s._)("nav",null,[(0,s._)("ul",Ko,[(0,s._)("li",{class:(0,h.C_)(["page-item",{disabled:1===l.currentPage}])},[(0,s._)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:a[4]||(a[4]=e=>r.buscaAcessos(l.page-1))},Jo)],2),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.totalPages,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e,class:(0,h.C_)(["page-item",{active:e===l.currentPage}])},[(0,s._)("a",{class:"page-link",href:"#",onClick:a=>r.buscaAcessos(e)},(0,h.zw)(e),9,Xo)],2)))),128)),(0,s._)("li",{class:(0,h.C_)(["page-item",{disabled:l.currentPage===l.totalPages-1}])},[(0,s._)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:a[5]||(a[5]=e=>r.buscaAcessos(l.totalPages))},at)],2)])])])])]),(0,s._)("div",ot,[(0,s._)("div",tt,[l.mostraFoto?((0,s.wg)(),(0,s.iD)("img",{key:0,src:l.fotoPessoa,alt:"Foto Acesso",style:{"object-fit":"none",border:"solid 1px lightgray","border-radius":"20px"}},null,8,st)):(0,s.kq)("",!0),l.mostraFoto?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("img",it))]),this.mostraFoto?((0,s.wg)(),(0,s.iD)("div",lt,nt)):(0,s.kq)("",!0)])]),ct,dt,ut])],64)}var pt=o(2864),mt=o.n(pt);class gt{constructor(){this.ws=new WebSocket("ws://192.168.0.6:8081"),this.listeners=[],this.initialize()}initialize(){this.ws.addEventListener("open",(()=>{console.log("WebSocket connected")})),this.ws.addEventListener("message",(e=>{this.notifyAll(e)}))}addListener(e){this.listeners.push(e)}removeListener(e){this.listeners=this.listeners.filter((a=>a!==e))}notifyAll(e){this.listeners.forEach((a=>a(e)))}send(e){this.ws.send(e)}close(){this.ws.close()}}const wt=e=>((0,s.dD)("data-v-02398925"),e=e(),(0,s.Cn)(),e),ft={class:"submenu-administrativo1",style:{"text-align":"center"}},bt=wt((()=>(0,s._)("br",null,null,-1))),_t=wt((()=>(0,s._)("br",null,null,-1))),vt=wt((()=>(0,s._)("br",null,null,-1))),yt=wt((()=>(0,s._)("br",null,null,-1))),Ct=wt((()=>(0,s._)("br",null,null,-1))),xt={key:0},kt={style:{color:"rgb(255, 255, 255)"}},Pt=["href"],St={class:"categorias1"},Dt={style:{"text-decoration":"none",color:"rgb(255, 255, 255)"}};function jt(e,a,o,t,i,l){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",ft,[bt,_t,vt,yt,Ct,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(i.sgp,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.id},[e.filho.length>0?((0,s.wg)(),(0,s.iD)("div",xt,[(0,s._)("h6",kt,(0,h.zw)(e.nome),1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.filho,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.id,class:"submenu-column"},[(0,s._)("a",{href:i.devURL+e.url,style:{"text-decoration":"none",color:"rgb(255, 255, 255)"}},[(0,s._)("div",St,[(0,s._)("span",Dt,(0,h.zw)(e.nome),1)])],8,Pt)])))),128))])):(0,s.kq)("",!0)])))),128))])])}var qt={name:"TesteSideMenuView",data(){return{sgp:"",devURL:ve.defaults.devURL}},methods:{getAllSidebar(){E.Z.get("http://192.168.0.6:8000/api/menu/estrutura/7").then((e=>{this.sgp=e.data.data.map((e=>new N(e)))}))}},mounted(){this.getAllSidebar()}};const Vt=(0,z.Z)(qt,[["render",jt],["__scopeId","data-v-02398925"]]);var Mt=Vt;const Et=(0,ge.RN)({position:"top-right",duration:"4000"});var Nt={name:"AcessoView",components:{MenuLSGP:Mt},data(){return{acessos:[],message:"",fotoPessoa:"",mostraFoto:!1,filtro:"",filtroNome:"",pageAcesso:1,localSelecionado:null,localData:[],wsService:new gt,apiUrl:ve.defaults.baseURL,urlFoto:_e.caminhoFoto,lastPage:null,currentPage:null,totalPages:null,page:1}},created(){const e=localStorage.getItem("localSelecionado");e&&(this.localSelecionado=JSON.parse(e),this.alterarLocal()),this.wsService.addListener(this.handleMessage)},beforeUnmount(){this.wsService.removeListener(this.handleMessage),this.wsService.close()},mounted(){this.buscaLocal(),this.buscaAcessos(this.page)},computed:{paginatedData(){const e=this.currentPage*this.itemsPerPage,a=e+this.itemsPerPage;return this.visitantes.slice(e,a)}},methods:{pesquisaComFiltro(){this.pesquisaAcessos(this.filtroNome)},async pesquisaAcessos(e=""){try{const a=await ve.get(`/local/${this.localSelecionado}/acessos`);this.acessos=a.data.data,this.lastPage=a.last_page,this.page=1,this.acessos=this.acessos.filter((a=>a.nomeCompleto.toLowerCase().includes(e.toLowerCase())))}catch(a){console.error("Error:",a)}},replaceIcon(){this.results=this.text.replace(this.text,this.newText)},formatarDataHora(e){if(e){const a=mt().utc(e).tz("America/Sao_Paulo");return a.format("DD/MM/YYYY HH:mm:ss")}return""},async buscaAcessos(e){try{const a=await ve.get(`/local/${this.localSelecionado}/acessos?page=${e}`);this.acessos=a.data.data,this.totalPages=a.data.last_page}catch(a){console.error("Erro:",a),Et.show("Erro ao buscar acessos",{type:"error"})}},async alterarLocal(){if(null!==this.localSelecionado)try{const e=await fetch(`${this.apiUrl}/local/${this.localSelecionado}/acessos`),a=await e.json();this.acessos=a.data||[],localStorage.setItem("localSelecionado",JSON.stringify(this.localSelecionado))}catch(e){console.error("Error ao alterar empresa",e),Et.show("Erro alterar empresa",{type:"error"})}},async buscaLocal(){try{const e=await fetch(`${this.apiUrl}/local`);this.localData=await e.json()}catch(e){console.error("Error ao buscar empresas",e),Et.show("Erro buscar empresa",{type:"error"})}},async handleMessage(e){this.message=e.data,console.log("event",this.message);try{const e=JSON.parse(this.message);if("acesso_autorizado"===e.mensagem&&1===e.visitante){const a=await new Promise(((a,o)=>{ve.get(`/visitante/${e.pessoa_id}`).then((e=>a(e))).catch((e=>{o(e)}))}));if(a.data.path_image){const e="http://192.168.0.6:8000/storage/";this.fotoPessoa=e+a.data.path_image,this.mostraFoto=!0,this.buscaAcessos()}}if("acesso_autorizado"===e.mensagem&&0===e.visitante){const a=await new Promise(((a,o)=>{ve.get(`/pessoa/${e.pessoa_id}`).then((e=>a(e))).catch((e=>{o(e)}))}));if(a.data.path_image){const e="http://192.168.0.6:8000/storage/";this.fotoPessoa=e+a.data.path_image,this.mostraFoto=!0,this.buscaAcessos()}}else"acesso_negado"===e.mensagem&&(console.log(e.mensagem),this.mostraFoto=!1)}catch(a){console.error("Mensagem não reconhecida no Acesso",a)}}}};const Lt=(0,z.Z)(Nt,[["render",ht]]);var zt=Lt;const Ft={class:"container"},Ut=(0,s._)("div",{class:"row"},[(0,s._)("div",{class:"col-sm-12",style:{"text-align":"center"}},[(0,s._)("h2",{class:"titulo"},"Visitante"),(0,s._)("hr")])],-1),At={class:"mb-3"},It={class:"col-sm-2"},Rt=(0,s._)("i",{class:"fa-solid fa-plus"},null,-1),Ot={class:"col-lg-6 col-md-12"},$t={class:"input-group mt-3"},Wt=(0,s._)("div",{class:"input-group-prepend"},[(0,s._)("span",{class:"input-group-text"},[(0,s._)("i",{class:"fa-solid fa-magnifying-glass"})])],-1),Ht=(0,s._)("div",{class:"d-flex row mb-3"},null,-1),Tt={class:"table-responsive"},Yt={class:"table table-hover"},Zt=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"Nome"),(0,s._)("th",null,"CPF"),(0,s._)("th",null,"Gênero"),(0,s._)("th",null,"Celular"),(0,s._)("th",null,"E-mail"),(0,s._)("th",{style:{"text-align":"center"}},"Nova visita"),(0,s._)("th",null,"Ações")])],-1),Bt={style:{"text-align":"center"}},Gt=["onClick"],Kt=(0,s._)("i",{class:"fa-solid fa-plus"},null,-1),Qt=[Kt],Jt=["onClick"],Xt=(0,s._)("i",{class:"fa fa-edit icones-tabela",style:{"font-size":"18px",color:"var(--first-color)"}},null,-1),es=[Xt],as=["onClick"],os=(0,s._)("i",{class:"fa fa-trash icones-tabela",style:{"font-size":"18px",color:"var(--first-color)"}},null,-1),ts=[os],ss=(0,s._)("br",null,null,-1),is={class:"pagination"},ls=(0,s._)("span",{"aria-hidden":"true"},"«",-1),rs=[ls],ns=["onClick"],cs=(0,s._)("span",{"aria-hidden":"true"},"»",-1),ds=[cs],us={class:"modal fade",id:"staticBackdrop",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},hs={class:"modal-dialog"},ps={class:"modal-content"},ms=(0,s._)("div",{class:"modal-header"},[(0,s._)("h1",{class:"modal-title fs-5",id:"staticBackdropLabel"},"Confirmação"),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),gs=(0,s._)("div",{class:"modal-body"},[(0,s._)("p",null,"Confirma a exclusão do registro?")],-1),ws={class:"modal-footer"},fs=(0,s._)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",style:{}},"Cancelar",-1);function bs(e,a,o,i,l,r){const n=(0,s.up)("MenuLSGP"),c=(0,s.up)("VisitanteModal");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(n),(0,s._)("div",Ft,[(0,s._)("div",null,[Ut,(0,s._)("div",At,[(0,s._)("div",It,[(0,s._)("button",{type:"button",class:"button-cadastrar",onClick:a[0]||(a[0]=(...e)=>r.adicionarPessoa&&r.adicionarPessoa(...e))},[Rt,(0,s.Uk)("  Cadastrar")])]),(0,s._)("div",Ot,[(0,s._)("div",$t,[Wt,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>l.filtroNome=e),onInput:a[2]||(a[2]=(...e)=>r.pesquisaComFiltro&&r.pesquisaComFiltro(...e)),type:"text",placeholder:"Pesquisar visitante por nome",class:"form-control"},null,544),[[t.nr,l.filtroNome]])])])]),Ht,(0,s._)("div",Tt,[(0,s._)("table",Yt,[Zt,(0,s._)("tbody",Bt,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.visitantesFiltrados,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("td",null,(0,h.zw)(e.nomeCompleto),1),(0,s._)("td",null,(0,h.zw)(e.CPF),1),(0,s._)("td",null,(0,h.zw)(r.mostraGenero(e.sexo)),1),(0,s._)("td",null,(0,h.zw)(e.celular),1),(0,s._)("td",null,(0,h.zw)(e.email),1),(0,s._)("td",null,[(0,s._)("div",null,[(0,s._)("button",{type:"button",class:"button-visita",onClick:a=>r.abrirModal(e),"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Clique para cadastrar visita"},Qt,8,Gt)])]),(0,s._)("td",null,[(0,s._)("div",null,[(0,s._)("button",{onClick:a=>r.editarPessoa(e),class:"btn btn-color-grey",style:{"margin-right":"20px"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Clique para editar visitante"},es,8,Jt),(0,s._)("button",{type:"button",class:"btn btn-color-grey","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop","data-bs-placement":"top",title:"Clique para excluir visitante",onClick:a=>r.excluirPessoa(e.id)},ts,8,as)])])])))),128))])]),ss,(0,s._)("nav",null,[(0,s._)("ul",is,[(0,s._)("li",{class:(0,h.C_)(["page-item",{disabled:1===l.currentPage}])},[(0,s._)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:a[3]||(a[3]=e=>r.buscarTodosVisitantes(l.page-1))},rs)],2),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.totalPages,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e,class:(0,h.C_)(["page-item",{active:e===l.currentPage}])},[(0,s._)("a",{class:"page-link",href:"#",onClick:a=>r.buscarTodosVisitantes(e)},(0,h.zw)(e),9,ns)],2)))),128)),(0,s._)("li",{class:(0,h.C_)(["page-item",{disabled:l.currentPage===l.totalPages-1}])},[(0,s._)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:a[4]||(a[4]=e=>r.buscarTodosVisitantes(l.totalPages))},ds)],2)])])])]),(0,s._)("div",us,[(0,s._)("div",hs,[(0,s._)("div",ps,[ms,gs,(0,s._)("div",ws,[fs,(0,s._)("button",{type:"button",class:"btn btn-primary",onClick:a[5]||(a[5]=(...e)=>r.confirmarExclusao&&r.confirmarExclusao(...e)),"data-bs-dismiss":"modal"},"Confirmar")])])])]),(0,s.Wm)(c,{open:i.isOpen,onClose:r.fecharModal,pessoaIDModal:l.pessoaIDModal||0,pessoaNomeModal:l.pessoaNomeModal||"",pessoaCPFModal:l.pessoaCPFModal||"",pessoaEmail:l.pessoaEmail||""},null,8,["open","onClose","pessoaIDModal","pessoaNomeModal","pessoaCPFModal","pessoaEmail"])])],64)}var _s=o(4870);const vs=e=>((0,s.dD)("data-v-1eb75df8"),e=e(),(0,s.Cn)(),e),ys={key:0,class:"background"},Cs={class:"card"},xs={class:"d-flex justify-content-between"},ks={style:{color:"var(--second-color)","font-weight":"600"}},Ps=vs((()=>(0,s._)("div",{style:{"margin-bottom":"-15px",color:"var(--second-color)"}},[(0,s._)("hr")],-1))),Ss={style:{display:"flex","flex-flow":"column"}},Ds={style:{display:"flex","flex-flow":"row"}},js=(0,s.uE)('<div style="width:45%;display:flex;flex-flow:column;padding:15px 20px 0px 0px;" data-v-1eb75df8><div style="display:flex;flex-flow:row;margin-bottom:15px;" data-v-1eb75df8><span data-v-1eb75df8>Validade</span> <span style="color:red;" data-v-1eb75df8>* </span></div><div style="display:flex;flex-flow:row;" data-v-1eb75df8><div class="mr-3" data-v-1eb75df8><input class="form-control d-inline" value="1" type="number" id="dias" size="sm" style="width:50px;" data-v-1eb75df8><label for="dias" class="d-inline ms-1" data-v-1eb75df8>Dia(s)</label></div><div data-v-1eb75df8><input class="form-control d-inline" type="number" max="24" id="horas" size="sm" value="0" style="width:50px;" data-v-1eb75df8><label for="horas" class="d-inline ms-1" data-v-1eb75df8>Hora(s)</label></div></div><div style="display:flex;flex-flow:column;padding-top:45px;" data-v-1eb75df8><div style="display:flex;flex-flow:row;margin-bottom:15px;" data-v-1eb75df8><span data-v-1eb75df8>Informações</span></div><div data-v-1eb75df8><textarea class="form-control" id="info" rows="5" for="info" data-v-1eb75df8></textarea></div></div></div>',1),qs={style:{display:"flex","flex-flow":"column",padding:"15px 20px 0px 0px"}},Vs=vs((()=>(0,s._)("div",{style:{"margin-bottom":"15px"}},[(0,s._)("span",null,"Setor"),(0,s.Uk)(" "),(0,s._)("span",{style:{color:"red"}},"* ")],-1))),Ms={class:"input-group mb-2"},Es=vs((()=>(0,s._)("div",{class:"input-group-prepend"},[(0,s._)("span",{class:"input-group-text"},[(0,s._)("i",{class:"fa-solid fa-magnifying-glass"})])],-1))),Ns={style:{display:"flex",height:"210px",border:"solid","border-color":"lightgray","border-radius":"5px","border-width":"1px"}},Ls={class:"table-responsive"},zs=["value"],Fs={style:{"max-height":"40px","overflow-y":"auto"}},Us={style:{width:"50%",display:"flex","flex-flow":"column",padding:"15px 0px 0px 0px"}},As={class:"mb-2"},Is=vs((()=>(0,s._)("i",{class:"fa-regular fa-address-card"},null,-1))),Rs={class:"camera",style:{border:"solid","border-width":"1px","border-color":"lightgray","border-radius":"10px"}},Os={style:{display:"flex","flex-flow":"row","justify-content":"center","margin-top":"10px"}},$s={key:0,class:"fas fa-spinner fa-spin"},Ws={key:1},Hs={key:2};function Ts(e,a,o,i,l,r){const n=(0,s.up)("qrcode-stream");return o.open?((0,s.wg)(),(0,s.iD)("div",ys,[(0,s._)("div",Cs,[(0,s._)("div",xs,[(0,s._)("span",null,[(0,s.Uk)("Cadastrar visita para "),(0,s._)("span",ks,(0,h.zw)(o.pessoaNomeModal),1)]),(0,s._)("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:a[0]||(a[0]=(...e)=>r.closeModal&&r.closeModal(...e))})]),Ps,(0,s._)("div",Ss,[(0,s._)("div",Ds,[js,(0,s._)("div",qs,[Vs,(0,s._)("div",Ms,[Es,(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>l.filtroSetor=e),type:"text",class:"form-control",placeholder:"Pesquisar","aria-label":"Pesquisa","aria-describedby":"basic-addon1"},null,512),[[t.nr,l.filtroSetor]])]),(0,s._)("div",Ns,[(0,s._)("table",Ls,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.setoresFiltrados,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("td",null,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>l.setoresVisitante=e),type:"checkbox",value:e.id,class:"check2"},null,8,zs),[[t.e8,l.setoresVisitante]])]),(0,s._)("td",Fs,"   "+(0,h.zw)(e.nome),1)])))),128))])])]),(0,s._)("div",Us,[(0,s._)("div",As,[(0,s._)("button",{onClick:a[3]||(a[3]=(...e)=>r.iniciaLeitor&&r.iniciaLeitor(...e)),class:"btn btn-primary mr-3"},[Is,(0,s.Uk)("  Vincular QR Code")])]),(0,s._)("div",Rs,[l.cameraAberta&&!l.qrcodeWebcam?((0,s.wg)(),(0,s.j4)(n,{key:0,onDecode:r.onDecode,onInit:r.onInit},null,8,["onDecode","onInit"])):(0,s.kq)("",!0)])])]),(0,s._)("div",Os,[(0,s._)("button",{type:"button",class:"btn btn-primary float-end",onClick:a[4]||(a[4]=(...e)=>r.salvarVisita&&r.salvarVisita(...e))},[l.loading?((0,s.wg)(),(0,s.iD)("i",$s)):(0,s.kq)("",!0),l.loading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("span",Ws," Salvar  ")),l.loading?((0,s.wg)(),(0,s.iD)("span",Hs," Salvando...  ")):(0,s.kq)("",!0)])])])])])):(0,s.kq)("",!0)}class Ys{constructor(e){e=e||{},this.id=e.id,this.nome=e.nome}}function Zs(){return new Promise(((e,a)=>ve.get("/setor").then((a=>e(a))).catch((e=>a(e)))))}function Bs(e){return new Promise(((a,o)=>ve.get(`/setor/${e}`).then((e=>a(e))).catch((e=>o(e)))))}function Gs(e){return new Promise(((a,o)=>ve.post("/setor",e).then((e=>a(e))).catch((e=>o(e)))))}function Ks(e){return new Promise(((a,o)=>ve.put(`/setor/${e.id}`,e).then((e=>a(e))).catch((e=>o(e)))))}function Qs(e){return new Promise(((a,o)=>ve.delete(`/setor/${e}`).then((e=>a(e))).catch((e=>o(e)))))}var Js={obterTodos:Zs,obterPorId:Bs,cadastrar:Gs,atualizar:Ks,deletar:Qs},Xs=o(3012);const ei=(0,ge.RN)({position:"top-right"});var ai={props:{open:{type:Boolean,required:!0},pessoaIDModal:{type:Number,required:!0,default:null},pessoaNomeModal:{type:String,required:!0,default:null},pessoaCPFModal:{type:String,required:!0,default:null},pessoaEmail:{type:String,required:!0,default:null},setup(e,{emit:a}){const o=()=>{this.qrodeCartao="",a("close",!1)};return{closeModal:o}}},components:{QrcodeStream:Xs.vG},data(){return{localSelecionado:"",localData:[],setores:[],filtroSetor:"",setoresVisitante:[],mostraAlerta:!1,mostraAlertaWebcam:!1,wsService:new gt,qrcodeWebcam:null,qrcodeCartao:"",cameraAberta:!1,dadosVisitaModal:{},qrCodeEmail:"",loading:!1}},created(){const e=localStorage.getItem("localSelecionado");e&&(this.localSelecionado=e);const a=this.localSelecionado,o=this.pessoaIDModal,t=this.pessoaNomeModal,s=this.pessoaCPFModal,i=this.pessoaEmail;console.log("modal","local id:",a,"id pessoa:",o,"nome pessoa:",t,"cpf pessoa:",s,"email:",i)},mounted(){this.obterSetores(),this.buscaLocal();const e=localStorage.getItem("localSelecionado");e&&(this.localSelecionado=JSON.parse(e),this.alterarLocal())},beforeUnmount(){this.wsService.removeListener(this.handleMessage),this.wsService.close()},computed:{setoresFiltrados(){return this.setores.filter((e=>{const a=this.filtroSetor.toLowerCase();return e.nome&&e.nome.toLowerCase().includes(a)}))}},methods:{async buscaLocal(){try{const e=await ve.get("/local");this.localData=e.data}catch(e){console.error("Error:",e)}},async alterarLocal(){if(null!==this.localSelecionado)try{const e=await ve.get(`/local/${this.localSelecionado}/acessos`);this.localData=e.data||[]}catch(e){console.error("Error",e)}},obterSetores(){Js.obterTodos().then((e=>{this.setores=e.data.data.map((e=>new Ys(e)))})).catch((e=>{console.log(e),ei.show('Erro ao carregar lista de setores"',{type:"error"})}))},iniciaLeitor(){this.wsService.addListener(this.handleMessage);const e=JSON.stringify({mensagem:"iniciar_leitor",local_id:this.localSelecionado});this.wsService.send(e),console.log("chamando websocket...",e);const a=2e3,o=setTimeout((()=>{console.log("tablet não respondeu, chamando webcam..."),this.wsService.removeListener(this.handleMessage),this.iniciarLeituraWebcam()}),a);this.wsService.addListener((()=>{clearTimeout(o),this.wsService.removeListener(this.handleMessage)})),this.qrCodeCartao="",this.mostraAlerta=!1},handleMessage(e){try{if(e&&e.data){const a=e.data,o=JSON.parse(a);if("qr_capturado"===o.mensagem)return this.qrCodeCartao=o.qrcode,console.log("leu no tablet:",this.qrCodeCartao),this.mostraAlerta=!0,void ei.show("Qr code capturado",{type:"success"})}else console.log("Sem resposta do websocket")}catch(a){console.error(a)}},iniciarLeituraWebcam(){this.cameraPermissaoConcedida()?this.cameraAberta=!0:(console.log("Permissão para a webcam não concedida"),ei.show("Por favor, conceda permissão para acessar a webcam",{type:"warning"}))},cameraPermissaoConcedida(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia},vincularCartaoWebcam(){this.onDetect()},async onDecode(e){try{this.qrCodeCartao="",this.mostraAlerta=!1,console.log("tem qr code?",this.qrCodeCartao),this.qrCodeCartao=e,console.log("lido na webcam:",this.qrCodeCartao),this.cameraAberta=!1,ei.show("Qr code capturado",{type:"success"})}catch(a){console.error("Erro onDecode: ",a)}},async onInit(e){try{await e,console.log("oninit ",e)}catch(a){"NotAllowedError"===a.name?(this.error="ERROR: you need to grant camera access permisson",console.log(this.error),ei.show("Sem permissão para acessar a webcam",{type:"error"})):"NotFoundError"===a.name?(this.error="ERROR: no camera on this device",console.log(this.error),ei.show("Webcam não encontrada",{type:"error"})):"NotSupportedError"===a.name?(this.error="ERROR: secure context required (HTTPS, localhost)",console.log(this.error)):"NotReadableError"===a.name?(this.error="ERROR: is the camera already in use?",console.log(this.error),ei.show("Webcam está em uso",{type:"error"})):"OverconstrainedError"===a.name?(this.error="ERROR: installed cameras are not suitable",console.log(this.error)):"StreamApiNotSupportedError"===a.name&&(this.error="ERROR: Stream API is not supported in this browser",console.log(this.error))}},salvarVisita(){this.loading=!0;const e=this.pessoaIDModal,a=this.pessoaNomeModal,o=this.pessoaEmail;if(0===this.setoresVisitante.length)return ei.show("Selecione um setor para a visita.",{type:"error"}),void(this.loading=!1);const t=document.getElementById("dias").value,s=document.getElementById("horas").value;if((!s||s<=0)&&(!t||t<=0))return ei.show("Informe a validade da visita",{type:"error"}),void(this.loading=!1);if(!o&&!this.qrCodeCartao)return ei.show("Informe o e-mail ou leia um QR Code para a visita.",{type:"warning"}),void(this.loading=!1);const i=new Date,l=i.toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}).replace(/[^\d]/g,"");this.qrCodeEmail="VX"+e+a.replace(/\s/g,"")+this.setoresVisitante.join("")+this.localSelecionado+l.replace(/\s/g,""),this.dadosVisitaModal={pessoa_id:e,qrcode:this.qrCodeEmail,info:document.getElementById("info").value,setor_id:this.setoresVisitante,val_dias:document.getElementById("dias").value,val_horas:document.getElementById("horas").value,local_id:this.localSelecionado,qrcode_fisico:this.qrCodeCartao,base64:this.pessoaImgBase64},console.log("qrcodemail ",this.qrCodeEmail),ve.post("/visita",this.dadosVisitaModal).then((e=>{1===e.data.cod?(ei.show("QR Code de visitante inválido. Tente outro QR Code",{type:"error"}),this.qrCodeCartao=""):!this.pessoaEmail&&this.qrCodeCartao?(this.loading=!1,ei.show("Visita cadastrada",{type:"success"})):(this.pessoaEmail&&this.qrCodeCartao||this.pessoaEmail&&!this.qrCodeCartao)&&(this.loading=!1,ei.show("Visita cadastrada. QR Code enviado para o e-mail cadastrado",{type:"success"})),this.setoresVisitante=[],this.qrcodeCartao="",this.loading=!1,this.$emit("close")})).catch((e=>{this.loading=!1,console.error(e),ei.show("Erro ao cadastrar visita",{type:"error"})}))},closeModal(){this.setoresVisitante=[],this.$emit("close")}}};const oi=(0,z.Z)(ai,[["render",Ts],["__scopeId","data-v-1eb75df8"]]);var ti=oi;const si=(0,ge.RN)({position:"top-right"});var ii={name:"VisitanteView",components:{MenuLSGP:Mt,VisitanteModal:ti},setup(){const e=(0,_s.iH)(!1),a=()=>(e.value=!0,e.value);return{isOpen:e,openModal:a}},data(){return{showModal:!1,pessoaIDModal:null,pessoaNomeModal:null,pessoaCPFModal:null,pessoaEmail:null,filtroNome:"",visitantes:[],page:1,lastPage:null,currentPage:null,totalPages:null}},created(){const e=localStorage.getItem("local");e&&(this.localSelecionado=e)},mounted(){this.buscarTodosVisitantes(this.page)},computed:{visitantesFiltrados(){const e=this.filtroNome.toLowerCase();return this.visitantes.filter((a=>a.nomeCompleto.toLowerCase().includes(e)))},paginatedData(){const e="",a=this.currentPage*e,o=a+e;return this.visitantes.slice(a,o)}},methods:{adicionarPessoa(){this.$router.push({name:"VisitanteCadastro"})},editarPessoa(e){this.$router.push({name:"EditarVisitante",params:{id:e.id}})},excluirPessoa(e){this.idToDelete=e},confirmarExclusao(){const e=this.idToDelete,a=this.visitantes.findIndex((a=>a.id===e));-1!==a&&ve.delete(`/visitante/${e}`).then((e=>{console.log("Response",e),this.buscarTodosVisitantes(this.page)})).catch((e=>{console.error("Error",e),si.show("Erro. Não foi possível excluir o visitante",{type:"error"})})),si.show("Visitante excluído",{type:"success"})},async buscarTodosVisitantes(e){try{const a=await ve.get(`/visitante?page=${e}`);this.visitantes=a.data.data,this.totalPages=a.data.last_page}catch(a){console.error("Error:",a),si.show("Erro ao buscar visitantes",{type:"error"})}},ordenarPessoas(e,a){return e.id<a.id?-1:e.id>a.id?1:0},mostraGenero(e){return"f"===e?"Feminino":"m"===e?"Masculino":e},async pesquisaVisitantes(e=""){try{const a=await ve.get("/visitante");this.visitantes=a.data.data||[],this.lastPage=a.data.last_page||1,this.page=1,this.visitantes=this.visitantes.filter((a=>a.nomeCompleto.toLowerCase().includes(e.toLowerCase())))}catch(a){console.error("Error:",a)}},pesquisaComFiltro(){this.pesquisaVisitantes(this.filtroNome)},abrirModal(e){this.pessoaIDModal=e.id,this.pessoaNomeModal=e.nomeCompleto,this.pessoaCPFModal=e.CPF,this.pessoaEmail=e.email,this.isOpen=!0},fecharModal(){this.isOpen=!1}}};const li=(0,z.Z)(ii,[["render",bs]]);var ri=li;const ni={class:"container"},ci={class:"row mb-3",style:{"text-align":"center"}},di={class:"col-sm-12"},ui={class:"titulo"},hi=(0,s._)("hr",null,null,-1),pi={class:"d-flex row flex-wrap"},mi={class:"col-6 col-md-6 col-sm-12"},gi={style:{margin:"10px 0 10px 0"}},wi=(0,s._)("div",{style:{display:"flex","flex-flow":"row"}},[(0,s._)("label",{for:"nomeCompleto"},"Nome"),(0,s.Uk)(" "),(0,s._)("p",{style:{color:"red"}},"*")],-1),fi=(0,s._)("label",{for:"cpf"},"CPF",-1),bi=(0,s._)("div",{style:{margin:"10px 0 0px 0"}},[(0,s._)("label",{for:"cpf"},[(0,s.Uk)("Gênero "),(0,s._)("i",{style:{color:"red"}},"*")])],-1),_i={style:{display:"flex","flex-flow":"row",margin:"0px 0 10px 0"}},vi={class:"form-check",style:{"margin-right":"10px"}},yi=(0,s._)("label",{class:"form-check-label",for:"feminino"},"Feminino",-1),Ci={class:"form-check"},xi=(0,s._)("label",{class:"form-check-label",for:"masculino"},"Masculino",-1),ki=(0,s._)("label",{for:"email"},"E-mail",-1),Pi={style:{margin:"10px 0 10px 0"}},Si=(0,s._)("label",{for:"celular"},"Celular",-1),Di={class:"col-6 col-md-6 col-sm12"},ji={class:"mt-2"},qi=(0,s._)("label",{class:"mr-3"},"Foto do visitante",-1),Vi={key:0,class:"mt-3"},Mi=(0,s._)("img",{src:No,alt:"Imagem em Base64",style:{"border-radius":"10px","max-width":"400px","max-height":"500px",border:"solid","border-color":"lightgrey","border-width":"1px"}},null,-1),Ei=[Mi],Ni={class:"mt-3"},Li={key:0,ref:"video",width:"500",height:"400",autoplay:""},zi=["src"],Fi={key:1,class:"mt-3 mb-3"},Ui=["src"],Ai={class:"d-flex justify-content-end"};function Ii(e,a,o,i,l,r){const n=(0,s.up)("MenuLSGP");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(n),(0,s._)("div",ni,[(0,s._)("div",ci,[(0,s._)("div",di,[(0,s._)("h2",ui,(0,h.zw)(l.modoCadastro?"Cadastrar":"Editar")+" Visitante",1),hi])]),(0,s._)("div",pi,[(0,s._)("div",mi,[(0,s._)("div",gi,[wi,(0,s.wy)((0,s._)("input",{type:"text",id:"nomeCompleto","onUpdate:modelValue":a[0]||(a[0]=e=>l.nomeCompleto=e),autocomplete:"off",required:"",class:"form-control"},null,512),[[t.nr,l.nomeCompleto]])]),(0,s._)("div",null,[fi,(0,s.wy)((0,s._)("input",{type:"text",id:"CPF","onUpdate:modelValue":a[1]||(a[1]=e=>l.CPF=e),class:"form-control"},null,512),[[t.nr,l.CPF]])]),bi,(0,s._)("div",_i,[(0,s._)("div",vi,[(0,s.wy)((0,s._)("input",{class:"form-check-input",type:"radio",name:"sexo",id:"feminino",value:"f","onUpdate:modelValue":a[2]||(a[2]=e=>l.sexo=e)},null,512),[[t.G2,l.sexo]]),yi]),(0,s._)("div",Ci,[(0,s.wy)((0,s._)("input",{class:"form-check-input",type:"radio",name:"sexo",id:"masculino",value:"m","onUpdate:modelValue":a[3]||(a[3]=e=>l.sexo=e)},null,512),[[t.G2,l.sexo]]),xi])]),(0,s._)("div",null,[ki,(0,s.wy)((0,s._)("input",{type:"text",id:"email","onUpdate:modelValue":a[4]||(a[4]=e=>l.email=e),class:"form-control"},null,512),[[t.nr,l.email]])]),(0,s._)("div",Pi,[Si,(0,s.wy)((0,s._)("input",{type:"text",id:"celular","onUpdate:modelValue":a[5]||(a[5]=e=>l.celular=e),class:"form-control"},null,512),[[t.nr,l.celular]])])]),(0,s._)("div",Di,[(0,s._)("div",ji,[qi,l.isCameraOpen?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("button",{key:0,class:"btn btn-primary rounded-pill",fab:"",dark:"",small:"",onClick:a[6]||(a[6]=(...e)=>r.toggleCamera&&r.toggleCamera(...e))}," Abrir câmera ")),l.isCameraOpen&&!l.isPhotoTaken?((0,s.wg)(),(0,s.iD)("button",{key:1,class:"mx-2 btn btn-primary rounded-pill",fab:"",dark:"",small:"",onClick:a[7]||(a[7]=(...e)=>r.toggleCamera&&r.toggleCamera(...e))}," Fechar câmera ")):(0,s.kq)("",!0),l.isCameraOpen?((0,s.wg)(),(0,s.iD)("button",{key:2,class:"mx-2 btn btn-primary rounded-pill",fab:"",dark:"",small:"",color:"primary",onClick:a[8]||(a[8]=(...e)=>r.captureImage&&r.captureImage(...e))}," Tirar foto ")):(0,s.kq)("",!0),l.isCameraOpen?((0,s.wg)(),(0,s.iD)("button",{key:3,class:"mx-2 btn btn-primary rounded-pill",fab:"",dark:"",small:"",color:"primary",onClick:a[9]||(a[9]=(...e)=>r.discardImage&&r.discardImage(...e))}," Descartar foto ")):(0,s.kq)("",!0)]),l.fotoPessoa||l.isPhotoTaken||l.isCameraOpen?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Vi,Ei)),(0,s._)("div",null,[(0,s._)("div",Ni,[l.isCameraOpen&&!l.isPhotoTaken?((0,s.wg)(),(0,s.iD)("video",Li,null,512)):(0,s.kq)("",!0),l.isPhotoTaken?((0,s.wg)(),(0,s.iD)("img",{key:1,src:l.imageBase64,alt:"",style:{"max-width":"100%","max-height":"400px"}},null,8,zi)):(0,s.kq)("",!0)])]),!l.fotoPessoa||l.isCameraOpen||l.isPhotoTaken?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",Fi,[(0,s._)("img",{src:l.fotoPessoa,alt:"foto visitante",style:{"border-radius":"10px","max-width":"100%","max-height":"400px"}},null,8,Ui)]))])]),(0,s._)("div",Ai,[(0,s._)("button",{onClick:a[10]||(a[10]=(...e)=>r.cancelarAcao&&r.cancelarAcao(...e)),class:"btn button-cancel"},"Cancelar"),(0,s._)("button",{onClick:a[11]||(a[11]=(...e)=>r.salvarVisitante&&r.salvarVisitante(...e)),class:"btn btn-primary"},"Salvar")])])],64)}class Ri{constructor(e){e=e||{},this.id=e.id,this.nomeCompleto=e.nomeCompleto,this.sexo=e.sexo,this.CPF=e.CPF,this.email=e.email,this.celular=e.celular,this.path_image=e.path_image}modeloValidoCadastro(){return!!this.nomeCompleto}modeloValidoAtualizar(){return!(!this.id||!this.nomeCompleto)}}const Oi=(0,ge.RN)({position:"top-right"});var $i={name:"VisitanteCadastro",components:{MenuLSGP:Mt},data(){return{visitante:new Ri({id_setor:null}),modoCadastro:!0,imageBase64:"",isCameraOpen:!1,isPhotoTaken:!1,video:null,image:null,nomeCompleto:"",sexo:"",CPF:"",email:"",celular:"",path_image:"",fotoPessoa:"",mostraFoto:!1,imagePath:"",showToast:!1,fotoAtualizada:null}},created(){let e=this.$route.params.id;e?(this.modoCadastro=!1,this.obterPessoaId(e)):this.modoCadastro=!0},methods:{toggleCamera(){this.isCameraOpen?this.closeCamera():this.openCamera()},openCamera(){this.isCameraOpen=!0,this.$nextTick((()=>{this.video=this.$refs.video,navigator.mediaDevices.getUserMedia({video:{width:500,height:400}}).then((e=>{this.video.srcObject=e})).catch((e=>{console.error("Erro ao acessar a webcam:",e),Oi.show("Acesso à webcam bloqueado. Permita o acesso à webcam",{type:"error"})}))}))},closeCamera(){if(this.isCameraOpen=!1,this.video&&this.video.srcObject){const e=this.video.srcObject.getTracks();e.forEach((e=>e.stop())),this.video.srcObject=null}},discardImage(){this.isPhotoTaken=!1,this.imageBase64="",this.openCamera()},captureImage(){const e=document.createElement("canvas");e.width=this.video.videoWidth,e.height=this.video.videoHeight;const a=e.getContext("2d");a.drawImage(this.video,0,0,e.width,e.height),e.toBlob((e=>{const a=new FileReader;a.onloadend=()=>{this.imageBase64=a.result,this.isPhotoTaken=!0,this.fotoAtualizada=!0,!this.modoCadastro&&this.fotoPessoa||(this.imagePath=null)},a.readAsDataURL(e)}),"image/png")},obterPessoaId(e){E.Z.get(`${ve.defaults.baseURL}/visitante/${e}`).then((e=>{const a=e.data;this.imagePath=e.data.path_image,this.nomeCompleto=a.nomeCompleto,this.CPF=a.CPF,this.sexo=a.sexo,this.email=a.email,this.celular=a.celular,this.mostraFotoPessoa()})).catch((e=>{console.log(e)}))},cancelarAcao(){this.visitante=new Ri,this.imageBase64=null,this.$router.push({name:"VisitanteView"})},cadastrarVisitante(){let e={nomeCompleto:this.nomeCompleto,sexo:this.sexo,CPF:this.CPF,email:this.email,celular:this.celular};this.imageBase64&&(e.base64=this.imageBase64),E.Z.post(`${ve.defaults.baseURL}/visitante`,e).then((e=>{console.log("Visitante cadastrado",e),this.$router.push({name:"VisitanteView"})})).catch((e=>{console.error("Erro ao cadastrar visitante:",e),Oi.show("Erro ao cadastrar visitante",{type:"error"})})),Oi.show("Visitante cadastrado",{type:"success"})},atualizarVisitante(){const e=this.$route.params.id;this.imageBase64?E.Z.put(`${ve.defaults.baseURL}/visitante/${e}`,{nomeCompleto:this.nomeCompleto,base64:this.imageBase64,sexo:this.sexo,CPF:this.CPF,email:this.email,celular:this.celular}).then((e=>{console.log("Visitante atualizado:",e),this.$router.push({name:"VisitanteView"}),Oi.show("Visitante atualizado",{type:"success"})})).catch((e=>{console.error("Erro ao atualizar visitante:",e),Oi.show("Erro ao atualizar visitante",{type:"error"})})):E.Z.put(`${ve.defaults.baseURL}/visitante/${e}`,{nomeCompleto:this.nomeCompleto,sexo:this.sexo,CPF:this.CPF,email:this.email,celular:this.celular}).then((e=>{console.log("Visitante atualizado:",e),this.$router.push({name:"VisitanteView"}),Oi.show("Visitante atualizado",{type:"success"})})).catch((e=>{console.error("Erro ao atualizar visitante:",e),Oi.show("Erro ao atualizar visitante",{type:"error"})}))},salvarVisitante(){this.nomeCompleto?this.sexo?this.modoCadastro?this.cadastrarVisitante():this.atualizarVisitante():Oi.show("Gênero não pode ser vazio",{type:"error"}):Oi.show("Nome não pode ser vazio",{type:"error"})},mostraFotoPessoa(){try{if(this.imagePath){const e="http://192.168.0.6:8000/storage/";this.fotoPessoa=e+this.imagePath,this.mostraFoto=!0}else console.error("Cadastro sem foto")}catch(e){console.error(e)}}}};const Wi=(0,z.Z)($i,[["render",Ii]]);var Hi=Wi;const Ti={class:"container"},Yi=(0,s._)("br",null,null,-1),Zi=(0,s._)("div",{class:"col-sm-12",style:{"text-align":"center"}},[(0,s._)("h2",{class:"titulo"},"Pesquisa"),(0,s._)("hr")],-1),Bi={class:"mt-3"},Gi={class:"d-flex col-lg-12 justify-content-around"},Ki={style:{margin:"0px 20px 0px 0px"}},Qi=(0,s._)("label",{for:"dataInicial"},"Data Inicial:",-1),Ji={style:{margin:"0px 20px 0px 0px"}},Xi=(0,s._)("label",{for:"dataFinal"},"Data Final:",-1),el={style:{margin:"0px 20px 0px 0px"}},al=(0,s._)("label",{for:"visitante"},"Visitante",-1),ol=(0,s._)("option",null,"Sim",-1),tl=(0,s._)("option",null,"Não",-1),sl=[ol,tl],il={style:{margin:"0px 20px 0px 0px"}},ll=(0,s._)("label",{for:"pessoa"},"Nome",-1),rl={style:{margin:"0px 20px 0px 0px"}},nl=(0,s._)("label",{for:"setor"},"Setor",-1),cl=["value"],dl={style:{margin:"0px 20px 0px 0px"}},ul=(0,s._)("label",{for:"local"},"Local",-1),hl=["value"],pl={style:{display:"flex","flex-flow":"row","justify-content":"center","margin-top":"20px","margin-bottom":"20px"}},ml={style:{margin:"0px 20px 0px 0px"}},gl=(0,s._)("i",{class:"fa-solid fa-magnifying-glass"},null,-1),wl={style:{margin:"10px 0px 10px 0px"}},fl={key:0,class:"table",id:"tabela-acessos"},bl=(0,s._)("thead",null,[(0,s._)("tr",{style:{"text-align":"center"}},[(0,s._)("th",null,"Nome"),(0,s._)("th",null,"Data/Hora Acesso"),(0,s._)("th",null,"Entrada/Saída"),(0,s._)("th",null,"Local"),(0,s._)("th",null,"Setor"),(0,s._)("th",null,"Visitante")])],-1),_l={key:0,class:"material-symbols-outlined"},vl={key:1,class:"material-symbols-outlined"},yl={class:"d-flex align-items-baseline justify-content-end mt-4"},Cl=["disabled"],xl={class:"mr-2 ml-2"},kl=["disabled"],Pl=(0,s._)("br",null,null,-1),Sl=(0,s._)("br",null,null,-1),Dl=(0,s._)("br",null,null,-1),jl=(0,s._)("br",null,null,-1);function ql(e,a,o,i,l,r){const n=(0,s.up)("MenuLSGP");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(n),(0,s._)("div",Ti,[Yi,Zi,(0,s._)("div",Bi,[(0,s._)("div",Gi,[(0,s._)("div",Ki,[Qi,(0,s.wy)((0,s._)("input",{type:"date","onUpdate:modelValue":a[0]||(a[0]=e=>l.filtro.inicial=e),id:"dataInicial",class:"form-control"},null,512),[[t.nr,l.filtro.inicial]])]),(0,s._)("div",Ji,[Xi,(0,s.wy)((0,s._)("input",{type:"date","onUpdate:modelValue":a[1]||(a[1]=e=>l.filtro.final=e),ref:"dataFinal",id:"dataFinal",class:"form-control"},null,512),[[t.nr,l.filtro.final]])]),(0,s._)("div",el,[al,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>l.filtro.visitante=e),id:"visitante",class:"form-control form-select",style:{width:"100px"}},sl,512),[[t.bM,l.filtro.visitante]])]),(0,s._)("div",il,[ll,(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=e=>l.filtro.nome=e),id:"nome",class:"form-control"},null,512),[[t.nr,l.filtro.nome]])]),(0,s._)("div",rl,[nl,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":a[4]||(a[4]=e=>l.setorSelecionado=e),id:"setor",class:"form-control form-select",style:{width:"180px"}},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.listaSetores,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e.id,value:e.id},(0,h.zw)(e.nome),9,cl)))),128))],512),[[t.bM,l.setorSelecionado]])]),(0,s._)("div",dl,[ul,(0,s.wy)((0,s._)("select",{class:"form-control form-select","onUpdate:modelValue":a[5]||(a[5]=e=>l.localSelecionado=e),style:{width:"120px"}},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.localLista,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e.id,value:e.id},(0,h.zw)(e.local_nome),9,hl)))),128))],512),[[t.bM,l.localSelecionado]])])]),(0,s._)("div",pl,[(0,s._)("div",ml,[(0,s._)("button",{onClick:a[6]||(a[6]=(...e)=>r.pesquisar&&r.pesquisar(...e)),class:"btn btn-primary"},[(0,s.Uk)("Pesquisar "),gl])]),(0,s._)("div",null,[(0,s._)("button",{onClick:a[7]||(a[7]=(...e)=>r.limparCampos&&r.limparCampos(...e)),class:"btn btn-primary"},"Limpar ")])]),(0,s._)("div",wl,[l.dadosFiltro&&l.dadosFiltro.length>0?((0,s.wg)(),(0,s.iD)("table",fl,[bl,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.dadosFiltro,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id,style:{"text-align":"center"}},[(0,s._)("td",null,(0,h.zw)(e.nomeCompleto),1),(0,s._)("td",null,(0,h.zw)(r.formatarDataHora(e.created_at)),1),(0,s._)("td",null,["e"===e.sentido?((0,s.wg)(),(0,s.iD)("span",_l,"login")):(0,s.kq)("",!0),"s"===e.sentido?((0,s.wg)(),(0,s.iD)("span",vl,"logout")):(0,s.kq)("",!0)]),(0,s._)("td",null,(0,h.zw)(e.local_nome),1),(0,s._)("td",null,(0,h.zw)(e.setor_nome),1),(0,s._)("td",null,(0,h.zw)(e.tipo_pessoa),1)])))),128))])])):(0,s.kq)("",!0)])]),(0,s._)("div",yl,[(0,s._)("button",{onClick:a[8]||(a[8]=e=>r.irParaPagina(l.pagina-1)),disabled:1===l.pagina,class:"btn btn-primary"},"Página Anterior",8,Cl),(0,s._)("span",xl,(0,h.zw)(l.pagina)+" de "+(0,h.zw)(l.totalPaginas),1),(0,s._)("button",{onClick:a[9]||(a[9]=e=>r.irParaPagina(l.pagina+1)),disabled:l.pagina===l.totalPaginas,class:"btn btn-primary"},"Próxima Página",8,kl)]),Pl,Sl,Dl,jl])],64)}var Vl={name:"PesquisaView",components:{MenuLSGP:Mt},data(){return{filtro:{inicial:null,final:null,visitante:null,nome:null,setor:null,local:null},dadosFiltro:[],listaSetores:[],setorSelecionado:null,localLista:[],localSelecionado:null,pagina:1,totalPaginas:1,filtroVazio:!1}},mounted(){this.carregarSetores(),this.carregarLocais(),this.dataAtual()},methods:{formatarDataHora(e){if(e){const a=mt().utc(e).tz("America/Sao_Paulo");return a.format("DD/MM/YYYY HH:mm:ss")}return""},dataAtual(){const e=new Date,a=String(e.getDate()).padStart(2,"0"),o=String(e.getMonth()+1).padStart(2,"0"),t=e.getFullYear(),s=`${t}-${o}-${a}`;this.filtro.final=s},irParaPagina(e){e>=1&&e<=this.totalPaginas&&(this.pagina=e,this.pesquisar())},pesquisar(){this.filtro.visitante="Sim"===this.filtro.visitante?"1":"Não"===this.filtro.visitante?"0":null,this.filtro.local=this.localSelecionado,this.filtro.setor=this.setorSelecionado||null;const e={params:this.filtro,page:this.pagina};E.Z.get(`http://192.168.0.6:8000/api/acesso/filtro?page=${this.pagina}`,e).then((a=>{console.log("API Response",a),this.dadosFiltro=a.data.data,this.totalPaginas=a.data.last_page,console.log("API response.data.data",this.dadosFiltro),void 0==this.dadosFiltro&&(this.filtroVazio=!0),console.log(`API Request URL: http://192.168.0.6:8000/api/acesso/filtro?page=${this.pagina}`,e),console.log("é visita?",this.filtro.visitante)})).catch((e=>{console.error("Erro ao buscar dados:",e)}))},carregarSetores(){E.Z.get("http://192.168.0.6:8000/api/setor").then((e=>{this.listaSetores=e.data.data})).catch((e=>{console.log(e)}))},async carregarLocais(){try{const e=await fetch("http://192.168.0.6:8000/api/local");this.localLista=await e.json()}catch(e){console.error("Erro ao buscar locais",e)}},limparCampos(){this.filtro={inicial:"",final:"",nome:"",setor:null,local:null,visitante:null},this.dadosFiltro=[],this.setorSelecionado=null,this.localSelecionado=null,this.pagina=1,this.totalPaginas=1,this.filtroVazio=!1}}};const Ml=(0,z.Z)(Vl,[["render",ql]]);var El=Ml,Nl=o.p+"img/acesso.40b1e047.png";const Ll=e=>((0,s.dD)("data-v-20b4851c"),e=e(),(0,s.Cn)(),e),zl=Ll((()=>(0,s._)("div",{class:"container"},[(0,s._)("div",{class:"d-flex justify-content-center"},[(0,s._)("img",{src:Nl,alt:""})])],-1)));function Fl(e,a,o,t,i,l){const r=(0,s.up)("MenuLSGP");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(r),zl],64)}var Ul={name:"AcessoHomeView",components:{MenuLSGP:Mt}};const Al=(0,z.Z)(Ul,[["render",Fl],["__scopeId","data-v-20b4851c"]]);var Il=Al;const Rl={class:"container"},Ol={class:"row"},$l={class:"col-sm-12",style:{"text-align":"center"}},Wl={class:"titulo"},Hl=(0,s._)("hr",null,null,-1),Tl={style:{display:"flex","flex-flow":"row"}},Yl={style:{width:"50%",display:"flex","flex-flow":"column"}},Zl={class:"d-flex align-items-baseline"},Bl=(0,s._)("label",{style:{"margin-right":"10px"}},"Local",-1),Gl=["value"],Kl={style:{margin:"10px 0 10px 0"}},Ql=(0,s._)("label",{for:"nomeCompleto"},[(0,s.Uk)("Nome "),(0,s._)("i",{style:{color:"red"}},"*")],-1),Jl=(0,s._)("label",{for:"cpf"},"CPF",-1),Xl=(0,s._)("div",{style:{margin:"10px 0 0px 0"}},[(0,s._)("label",{for:"cpf"},[(0,s.Uk)("Gênero "),(0,s._)("i",{style:{color:"red"}},"*")])],-1),er={style:{display:"flex","flex-flow":"row",margin:"0px 0 10px 0"}},ar={class:"form-check mr-3"},or=(0,s._)("label",{class:"form-check-label",for:"feminino"},"Feminino",-1),tr={class:"form-check"},sr=(0,s._)("label",{class:"form-check-label",for:"masculino"},"Masculino",-1),ir=(0,s._)("label",{for:"cpf"},"Data de nascimento",-1),lr={style:{margin:"10px 0 10px 0"}},rr=(0,s._)("label",{for:"email"},"E-mail",-1),nr=(0,s._)("label",{for:"celular"},"Celular",-1),cr={style:{margin:"10px 0 10px 0"}},dr=(0,s._)("label",{for:"setor"},[(0,s.Uk)("Setor "),(0,s._)("i",{style:{color:"red"}},"*")],-1),ur=["value"],hr={style:{width:"50%",display:"flex","flex-flow":"column","margin-left":"20px"}},pr=(0,s._)("label",null,[(0,s.Uk)("Envio de imagem do colaborador "),(0,s._)("i",{style:{color:"red"}},"*")],-1),mr={style:{border:"solid 1px lightgray",margin:"10px 0px 20px 0px"}},gr=["src"],wr={key:1,src:No,alt:"foto colaborador",style:{"border-radius":"30px","max-width":"100%","max-height":"400px"}},fr={class:"col-sm-12"},br={class:"form-check checkbox"},_r=(0,s._)("br",null,null,-1),vr=(0,s._)("label",{class:"form-check-label",for:"checkUsuario"},"Gerar Usuario ? ",-1),yr={class:"d-flex"},Cr={class:"d-flex justify-content-start",style:{width:"50%"}},xr=(0,s._)("i",{class:"fa-regular fa-address-card"},null,-1),kr={class:"ml-5"},Pr={class:"d-flex justify-content-end",style:{width:"50%"}},Sr={key:0,class:"fas fa-spinner fa-spin"},Dr={key:1},jr={key:2},qr=(0,s._)("br",null,null,-1),Vr=(0,s._)("br",null,null,-1),Mr=(0,s._)("br",null,null,-1),Er={class:"modal fade",id:"staticBackdrop",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},Nr={class:"modal-dialog"},Lr={class:"modal-content"},zr=(0,s._)("div",{class:"modal-header"},[(0,s._)("h1",{class:"modal-title fs-5",id:"staticBackdropLabel"},"Fazendo leitura do QR Code"),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Fr={class:"modal-body"},Ur={class:"camera"},Ar={key:0,style:{color:"green","font-weight":"600"}},Ir=(0,s._)("div",{class:"modal-footer","data-bs-dismiss":"modal"},[(0,s._)("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",style:{}},"Ok")],-1);function Rr(e,a,o,i,l,r){const n=(0,s.up)("MenuLSGP"),c=(0,s.up)("qrcode-stream");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(n),(0,s._)("div",Rl,[(0,s._)("div",Ol,[(0,s._)("div",$l,[(0,s._)("h2",Wl,(0,h.zw)(l.modoCadastro?"Cadastrar":"Editar")+" Colaborador",1),Hl])]),(0,s._)("div",Tl,[(0,s._)("div",Yl,[(0,s._)("div",Zl,[Bl,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>l.localSelecionado=e),onChange:a[1]||(a[1]=(...e)=>r.alterarLocal&&r.alterarLocal(...e)),class:"select",style:{border:"solid","border-radius":"5px","border-width":"1px","border-color":"lightgrey",padding:"5px 10px 5px 10px",width:"fit-content"}},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.localData,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e.id,value:e.id},(0,h.zw)(e.local_nome),9,Gl)))),128))],544),[[t.bM,l.localSelecionado]])]),(0,s._)("div",Kl,[Ql,(0,s.wy)((0,s._)("input",{type:"text",id:"nomeCompleto","onUpdate:modelValue":a[2]||(a[2]=e=>l.nomeCompleto=e),autocomplete:"off",class:"form-control"},null,512),[[t.nr,l.nomeCompleto]])]),(0,s._)("div",null,[Jl,(0,s.wy)((0,s._)("input",{type:"text",id:"CPF","onUpdate:modelValue":a[3]||(a[3]=e=>l.CPF=e),class:"form-control"},null,512),[[t.nr,l.CPF]])]),Xl,(0,s._)("div",er,[(0,s._)("div",ar,[(0,s.wy)((0,s._)("input",{class:"form-check-input",type:"radio",name:"sexo",id:"feminino",value:"f","onUpdate:modelValue":a[4]||(a[4]=e=>l.sexo=e)},null,512),[[t.G2,l.sexo]]),or]),(0,s._)("div",tr,[(0,s.wy)((0,s._)("input",{class:"form-check-input",type:"radio",name:"sexo",id:"masculino",value:"m","onUpdate:modelValue":a[5]||(a[5]=e=>l.sexo=e)},null,512),[[t.G2,l.sexo]]),sr])]),(0,s._)("div",null,[ir,(0,s.wy)((0,s._)("input",{type:"date",id:"dtNasc","onUpdate:modelValue":a[6]||(a[6]=e=>l.dtNasc=e),class:"form-control"},null,512),[[t.nr,l.dtNasc]])]),(0,s._)("div",lr,[rr,(0,s.wy)((0,s._)("input",{type:"text",id:"email","onUpdate:modelValue":a[7]||(a[7]=e=>l.email=e),class:"form-control"},null,512),[[t.nr,l.email]])]),(0,s._)("div",null,[nr,(0,s.wy)((0,s._)("input",{type:"text",id:"celular","onUpdate:modelValue":a[8]||(a[8]=e=>l.celular=e),class:"form-control"},null,512),[[t.nr,l.celular]])]),(0,s._)("div",cr,[dr,(0,s.wy)((0,s._)("select",{id:"id_setor","onUpdate:modelValue":a[9]||(a[9]=e=>l.id_setor=e),class:"form-select"},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.setores,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e.id,value:e.id},(0,h.zw)(e.nome),9,ur)))),128))],512),[[t.bM,l.id_setor]])])]),(0,s._)("div",hr,[pr,(0,s._)("div",mr,[(0,s._)("input",{type:"file",id:"foto",onChange:a[10]||(a[10]=(...e)=>r.handleFileUpload&&r.handleFileUpload(...e)),class:"form-control",accept:"image/png, image/jpeg"},null,32)]),(0,s._)("div",null,[l.fotoPessoa?((0,s.wg)(),(0,s.iD)("img",{key:0,src:l.fotoPessoa,alt:"foto colaborador",style:{"border-radius":"30px","max-width":"100%","max-height":"400px"}},null,8,gr)):(0,s.kq)("",!0),l.fotoPessoa?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("img",wr))]),(0,s._)("div",fr,[(0,s._)("div",br,[_r,(0,s.wy)((0,s._)("input",{class:"form-check-input",type:"checkbox",id:"checkUsuario",value:"usuarioGerar","onUpdate:modelValue":a[11]||(a[11]=e=>l.gerarUsuarioCheck=e)},null,512),[[t.e8,l.gerarUsuarioCheck]]),vr])])])]),(0,s._)("div",yr,[(0,s._)("div",Cr,[(0,s._)("button",{onClick:a[12]||(a[12]=(...e)=>r.iniciaLeitor&&r.iniciaLeitor(...e)),class:"btn btn-primary",style:{width:"180px"},"data-bs-toggle":"modal","data-bs-target":"#staticBackdrop","data-bs-placement":"top",title:"Vincular cartão"},[(0,s.Uk)(" Vincular cartão  "),xr]),(0,s._)("span",kr,"QR Code lido: "+(0,h.zw)(l.qrCodeCartao),1)]),(0,s._)("div",Pr,[(0,s._)("button",{onClick:a[13]||(a[13]=(...e)=>r.cancelar&&r.cancelar(...e)),class:"btn button-cancel"},"Cancelar"),(0,s._)("button",{onClick:a[14]||(a[14]=(...e)=>r.cadastrarPessoa&&r.cadastrarPessoa(...e)),"aria-hidden":"true",class:"btn btn-primary"},[l.loading?((0,s.wg)(),(0,s.iD)("i",Sr)):(0,s.kq)("",!0),l.loading?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("span",Dr,"Salvar")),l.loading?((0,s.wg)(),(0,s.iD)("span",jr,"  Salvando...")):(0,s.kq)("",!0)])])]),qr,Vr,Mr,(0,s._)("div",Er,[(0,s._)("div",Nr,[(0,s._)("div",Lr,[zr,(0,s._)("div",Fr,[(0,s._)("div",Ur,[l.cameraAberta&&!l.qrcodeWebcam?((0,s.wg)(),(0,s.j4)(c,{key:0,onDecode:r.onDecode,onInit:r.onInit},null,8,["onDecode","onInit"])):(0,s.kq)("",!0)]),(0,s._)("div",null,[this.mostraAlerta?((0,s.wg)(),(0,s.iD)("span",Ar,"QR Code lido")):(0,s.kq)("",!0)])]),Ir])])])])],64)}o(8858),o(1318),o(3228);var Or=o(6797),$r=o.n(Or);function Wr(e){if(e)return $r()(e).locale("pt-br").format("DD/MM/YYYY")}function Hr(e){if(e)return $r()(e).locale("pt-br").format("DD/MM/YYYY HH:mm:ss")}function Tr(e){if(e){let a=$r()(e).locale("pt-br").format("yyyy-MM-DD");return a+"T00:00:00"}}function Yr(e){if(e)return $r()(e).locale("pt-br").format("YYYY-MM-DD")}var Zr={dataConversor:Wr,dataConversorDateTime:Hr,aplicarMascaraFormatoAmericanoEmDataISO:Yr,aplicarMascaraISOEmFormatoAmericano:Tr};class Br{constructor(e){e=e||{},this.id=e.id,this.nomeCompleto=e.nomeCompleto,this.sexo=e.sexo,this.dtNasc=e.dtNasc&&Zr.aplicarMascaraFormatoAmericanoEmDataISO(e.dtNasc),this.CPF=e.CPF,this.email=e.email,this.celular=e.celular,this.id_setor=e.id_setor,this.path_image=e.path_image}}class Gr{constructor(e){e=e||{},this.id=e.id,this.name=e.name,this.email=e.email,this.password=e.password,this.grupo_id=e.grupo_id}}function Kr(){return new Promise(((e,a)=>ve.get("/usuario").then((a=>e(a))).catch((e=>a(e)))))}function Qr(e){return new Promise(((a,o)=>ve.put(`/usuario/${e.id}`,e).then((e=>a(e))).catch((e=>o(e)))))}function Jr(e){return new Promise(((a,o)=>ve.get(`/usuario/${e}`).then((e=>a(e))).catch((e=>o(e)))))}function Xr(e){return new Promise(((a,o)=>ve.post("/register",e).then((e=>a(e))).catch((e=>o(e)))))}function en(e){return new Promise(((a,o)=>ve.delete(`/usuario/${e}`).then((e=>a(e))).catch((e=>o(e)))))}var an={obterTodos:Kr,obterPorId:Jr,cadastrar:Xr,deletar:en,atualizar:Qr};const on=(0,ge.RN)({position:"top-right",duration:6e3});var tn={name:"ColaboradorComponent",components:{QrcodeStream:Xs.vG,MenuLSGP:Mt},data(){return{pessoa:new Br({id_setor:null}),usuario:new Gr,modoCadastro:!0,nomeCompleto:"",dtNasc:"",sexo:"",CPF:"",email:"",celular:"",id_setor:"",pessoa_img:"",filtroSetor:"",setores:[],fotoPessoa:"",mostraFoto:!1,wsService:new gt,localSelecionado:1,localData:[],mostraCapturado:!1,gerarUsuarioCheck:"",emailCriar:"",loading:!1,qrCodeCartao:"",mostraAlerta:!1,cameraAberta:!1,qrcodeWebcam:null,result:"",error:""}},created(){let e=this.$route.params.id;e?(this.modoCadastro=!1,this.obterPessoaPorId(e)):this.modoCadastro=!0},beforeUnmount(){this.wsService.removeListener(this.handleMessage),this.wsService.close()},mounted(){this.getAllSetor();let e=this.$route.params.id;this.modoCadastro=!e,this.gerarUsuarioCheck=this.modoCadastro,this.modoCadastro||this.obterPessoaPorId(e),this.buscaLocal();const a=localStorage.getItem("localSelecionado");a&&(this.localSelecionado=JSON.parse(a),this.alterarLocal())},methods:{async buscaLocal(){try{const e=await fetch("http://192.168.0.6:8000/api/local");this.localData=await e.json()}catch(e){console.error("Error ao buscar locais",e)}},async alterarLocal(){if(null!==this.localSelecionado)try{const e=await fetch(`http://192.168.0.6:8000/api/local/${this.localSelecionado}/acessos`),a=await e.json();this.acessos=a.data||[],localStorage.setItem("localSelecionado",JSON.stringify(this.localSelecionado))}catch(e){console.error("Error ao buscar locais",e)}},handleFileUpload(e){this.mostraFoto=!0;const a=e.target.files[0];a?(this.fotoPessoa=URL.createObjectURL(a),this.pessoa_img=a):(this.fotoPessoa=null,this.pessoa_img=null)},getAllSetor(){E.Z.get("http://192.168.0.6:8000/api/setor").then((e=>{this.setores=e.data.data})).catch((e=>{console.log(e)}))},obterPessoaPorId(e){E.Z.get(`http://192.168.0.6:8000/api/pessoa/${e}`).then((e=>{const a=e.data;if(this.imagePath=e.data.path_image,this.nomeCompleto=a.nomeCompleto,this.dtNasc=a.dtNasc,this.CPF=a.CPF,this.sexo=a.sexo,this.email=a.email,this.celular=a.celular,this.id_setor=a.id_setor,console.log("caminho foto",this.imagePath),this.imagePath){const e="http://192.168.0.6:8000/storage/";this.fotoPessoa=e+this.imagePath,console.log(this.fotoPessoa),this.mostraFoto=!0}else console.log("Colaborador sem foto")})).catch((e=>{console.log(e)}))},adicionarSePresente(e,a,o){void 0!==o&&null!==o&&e.append(a,o)},cadastrarPessoa(){this.loading=!0,this.usuario.email=this.email,this.usuario.name=this.nomeCompleto,this.emailCriar=this.usuario.email;const e=new FormData;this.nomeCompleto&&this.sexo&&this.id_setor?(this.loading=!0,this.gerarUsuarioCheck?(this.adicionarSePresente(e,"nomeCompleto",this.nomeCompleto),this.adicionarSePresente(e,"id_setor",this.id_setor),this.adicionarSePresente(e,"dtNasc",this.dtNasc),this.adicionarSePresente(e,"sexo",this.sexo),this.adicionarSePresente(e,"CPF",this.CPF),this.adicionarSePresente(e,"email",this.email),this.adicionarSePresente(e,"celular",this.celular),this.adicionarSePresente(e,"pessoa_img",this.pessoa_img),this.loading=!1,this.qrCodeCartao&&e.append("qrcode",this.qrCodeCartao),E.Z.post("http://192.168.0.6:8000/api/pessoa",e,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{const a=e.data;1===a.cod&&(this.qrCodeCartao="")})),an.cadastrar(this.usuario).then((()=>{this.loading=!0,this.usuario=new Gr,E.Z.post("http://192.168.0.6:8000/api/enviar-codigo",{email:this.emailCriar}).then((e=>{on.show("Colaborador e usuário criado com sucesso! Email enviado para "+this.email,{type:"success"}),this.$router.push({name:"ControleDeColaborador"}),this.loading=!1,console.log(e)}))})).catch((e=>{this.loading=!1,console.error(e)}))):(this.loading=!0,this.adicionarSePresente(e,"nomeCompleto",this.nomeCompleto),this.adicionarSePresente(e,"id_setor",this.id_setor),this.adicionarSePresente(e,"dtNasc",this.dtNasc),this.adicionarSePresente(e,"sexo",this.sexo),this.adicionarSePresente(e,"CPF",this.CPF),this.adicionarSePresente(e,"email",this.email),this.adicionarSePresente(e,"celular",this.celular),this.adicionarSePresente(e,"pessoa_img",this.pessoa_img),this.qrCodeCartao&&e.append("qrcode",this.qrCodeCartao),E.Z.post("http://192.168.0.6:8000/api/pessoa",e,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{this.loading=!1;const a=e.data;1===a.cod?this.qrCodeCartao="":(this.loading=!1,on.show("Colaborador cadastrado com sucesso!",{type:"success"}),this.$router.push({name:"ControleDeColaborador"}))})).catch((e=>{this.loading=!1,console.error(e)})))):(this.loading=!1,on.show("Por favor, preencha os campos obrigatórios",{type:"error"}))},atualizarPessoa(){this.loading=!0;const e=this.$route.params.id,a=new FormData;this.adicionarSePresente(a,"nomeCompleto",this.nomeCompleto),this.adicionarSePresente(a,"id_setor",this.id_setor),this.adicionarSePresente(a,"dtNasc",this.dtNasc),this.adicionarSePresente(a,"sexo",this.sexo),this.adicionarSePresente(a,"CPF",this.CPF),this.adicionarSePresente(a,"email",this.email),this.adicionarSePresente(a,"celular",this.celular),this.adicionarSePresente(a,"pessoa_img",this.pessoa_img),this.qrCodeCartao&&a.append("qrcode",this.qrCodeCartao),E.Z.post(`http://192.168.0.6:8000/api/pessoa/${e}`,a,{headers:{"Content-Type":"multipart/form-data"}}).then((e=>{const a=e.data;1===a.cod?(this.loading=!1,on.show("Qr Code já existente. Por favor, escolha um QR code diferente",{type:"error"})):(this.loading=!1,on.show("Pessoa atualizada com sucesso!",{type:"success"}),this.$router.push({name:"ControleDeColaborador"}))})).catch((e=>{this.loading=!1,on.show("Erro ao atualizar colaborador",{type:"success"}),console.error("Erro ao atualizar colaborador:",e)}))},salvarPessoa(){this.modoCadastro?this.cadastrarPessoa():this.atualizarPessoa()},cancelar(){this.pessoa=new Br,this.$router.push({name:"ControleDeColaborador"})},iniciaLeitor(){this.wsService.addListener(this.handleMessage);const e=JSON.stringify({mensagem:"iniciar_leitor",local_id:this.localSelecionado});this.wsService.send(e),console.log("chamando websocket..."),console.log("chamando",e);const a=2e3,o=setTimeout((()=>{console.log("tablet não respondeu, chamando webcam..."),this.wsService.removeListener(this.handleMessage),this.iniciarLeituraWebcam()}),a);this.wsService.addListener((()=>{clearTimeout(o),this.wsService.removeListener(this.handleMessage)})),this.qrCodeCartao="",this.mostraAlerta=!1},handleMessage(e){try{if(e&&e.data){const a=e.data,o=JSON.parse(a);if("qr_capturado"===o.mensagem)return this.qrCodeCartao=o.qrcode,console.log("leu no tablet:",this.qrCodeCartao),this.mostraAlerta=!0,on.show("Qr code capturado",{type:"success"}),void this.fechaModal()}else console.log("Sem resposta do websocket")}catch(a){console.error(a)}},iniciarLeituraWebcam(){this.cameraAberta=!0},vincularCartaoWebcam(){this.onDetect()},onDecode(e){this.qrCodeCartao="",this.mostraAlerta=!1,console.log("tem qr code?",this.qrCodeCartao),this.qrCodeCartao=e,console.log("lido na webcam:",this.qrCodeCartao),this.cameraAberta=!1,this.fechaModal(),on.show("Qr code capturado",{type:"success"})},async onInit(e){try{await e,console.log("oninit ",e)}catch(a){"NotAllowedError"===a.name?(this.error="ERROR: you need to grant camera access permisson",console.log(this.error),on.show("Sem permissão para acessar a webcam",{type:"error"}),this.fechaModal()):"NotFoundError"===a.name?(this.error="ERROR: no camera on this device",console.log(this.error),on.show("Webcam não encontrada",{type:"error"}),this.fechaModal()):"NotSupportedError"===a.name?(this.error="ERROR: secure context required (HTTPS, localhost)",console.log(this.error),this.fechaModal()):"NotReadableError"===a.name?(this.error="ERROR: is the camera already in use?",console.log(this.error),on.show("Webcam está em uso",{type:"error"}),this.fechaModal()):"OverconstrainedError"===a.name?(this.error="ERROR: installed cameras are not suitable",console.log(this.error),this.fechaModal()):"StreamApiNotSupportedError"===a.name&&(this.error="ERROR: Stream API is not supported in this browser",console.log(this.error),this.fechaModal())}},fechaModal(){const e=document.querySelector('[data-bs-dismiss="modal"]');e&&e.click()}}};const sn=(0,z.Z)(tn,[["render",Rr]]);var ln=sn;const rn={class:"container"},nn=(0,s._)("div",{class:"row"},[(0,s._)("div",{class:"col-sm-12",style:{"text-align":"center"}},[(0,s._)("h3",{class:"titulo"},"Colaborador"),(0,s._)("hr")])],-1),cn={class:"row sub-container"},dn={class:"col-sm-2"},un=(0,s._)("i",{class:"fa-solid fa-plus"},null,-1),hn=(0,s._)("br",null,null,-1),pn=(0,s._)("br",null,null,-1),mn={class:"row"},gn={class:"col-md-4 mb-3"},wn=(0,s._)("i",{class:"fa-solid fa-magnifying-glass"},null,-1),fn=(0,s._)("br",null,null,-1),bn=(0,s._)("br",null,null,-1),_n={class:"col-sm-12"},vn={class:"table table-hover"},yn=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{scope:"col"},"Nome"),(0,s._)("th",{scope:"col"},"CPF"),(0,s._)("th",{scope:"col"},"Gênero"),(0,s._)("th",{scope:"col"},"Celular"),(0,s._)("th",{scope:"col"},"E-mail"),(0,s._)("th",{scope:"col"},"Ações")])],-1),Cn={style:{"text-align":"center"}},xn=["onClick"],kn=(0,s._)("i",{class:"fa fa-edit icones-tabela",style:{"font-size":"18px",color:"var(--first-color)"}},null,-1),Pn=[kn],Sn=["onClick"],Dn=(0,s._)("i",{class:"fa fa-trash icones-tabela",style:{"font-size":"18px",color:"var(--first-color)"}},null,-1),jn=[Dn],qn={class:"pagination"},Vn=(0,s._)("span",{"aria-hidden":"true"},"«",-1),Mn=[Vn],En=["onClick"],Nn=(0,s._)("span",{"aria-hidden":"true"},"»",-1),Ln=[Nn],zn={class:"modal fade",id:"staticBackdrop",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},Fn={class:"modal-dialog"},Un={class:"modal-content"},An=(0,s._)("div",{class:"modal-header"},[(0,s._)("h1",{class:"modal-title fs-5",id:"staticBackdropLabel"},"Confirmação"),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),In=(0,s._)("div",{class:"modal-body"},[(0,s._)("p",null,"Confirma a exclusão do registro?")],-1),Rn={class:"modal-footer"},On=(0,s._)("button",{type:"button",class:"btn btn-outline-color","data-bs-dismiss":"modal"},"Cancelar",-1);function $n(e,a,o,t,i,l){const r=(0,s.up)("MenuLSGP"),n=(0,s.up)("b-input-group-prepend"),c=(0,s.up)("b-form-input"),d=(0,s.up)("b-input-group");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(r),(0,s._)("div",rn,[nn,(0,s._)("div",cn,[(0,s._)("div",dn,[(0,s._)("button",{onClick:a[0]||(a[0]=(...e)=>l.adicionarColaborador&&l.adicionarColaborador(...e)),class:"button-cadastrar"},[un,(0,s.Uk)("  Cadastrar")])]),hn,pn,(0,s._)("div",mn,[(0,s._)("div",gn,[(0,s.Wm)(d,{class:"mb-2 mt-3"},{default:(0,s.w5)((()=>[(0,s.Wm)(n,{"is-text":""},{default:(0,s.w5)((()=>[wn])),_:1}),(0,s.Wm)(c,{type:"text",placeholder:"Pesquisar colaborador por nome",modelValue:i.filtro,"onUpdate:modelValue":a[1]||(a[1]=e=>i.filtro=e)},null,8,["modelValue"])])),_:1})]),fn,bn,(0,s._)("div",_n,[(0,s._)("table",vn,[yn,(0,s._)("tbody",Cn,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.paginatedData,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("td",null,(0,h.zw)(e.nomeCompleto),1),(0,s._)("td",null,(0,h.zw)(e.CPF),1),(0,s._)("td",null,(0,h.zw)(l.mostraGenero(e.sexo)),1),(0,s._)("td",null,(0,h.zw)(e.celular),1),(0,s._)("td",null,(0,h.zw)(e.email),1),(0,s._)("td",null,[(0,s._)("div",null,[(0,s._)("button",{onClick:a=>l.editarColaborador(e),class:"btn btn-color-grey",style:{"margin-right":"20px"},"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Clique para editar colaborador"},Pn,8,xn),(0,s._)("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop",onClick:a=>l.excluirPessoa(e.id),class:"btn btn-color-grey","data-bs-placement":"top",title:"Clique para excluir colaborador"},jn,8,Sn)])])])))),128))])]),(0,s._)("nav",null,[(0,s._)("ul",qn,[(0,s._)("li",{class:(0,h.C_)(["page-item",{disabled:0===i.currentPage}])},[(0,s._)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:a[2]||(a[2]=(...e)=>l.prevPage&&l.prevPage(...e))},Mn)],2),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.numberOfPages,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e,class:(0,h.C_)(["page-item",{active:e===i.currentPage}])},[(0,s._)("a",{class:"page-link",href:"#",onClick:a=>l.setPage(e)},(0,h.zw)(e+1),9,En)],2)))),128)),(0,s._)("li",{class:(0,h.C_)(["page-item",{disabled:i.currentPage===l.numberOfPages-1}])},[(0,s._)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:a[3]||(a[3]=(...e)=>l.nextPage&&l.nextPage(...e))},Ln)],2)])])])])]),(0,s._)("div",zn,[(0,s._)("div",Fn,[(0,s._)("div",Un,[An,In,(0,s._)("div",Rn,[On,(0,s._)("button",{type:"button",class:"btn btn-color",onClick:a[4]||(a[4]=(...e)=>l.confirmarExclusao&&l.confirmarExclusao(...e)),"data-bs-dismiss":"modal"},"Confirmar")])])])])])],64)}const Wn=(0,ge.RN)({position:"top-right",duration:4e3});var Hn={name:"ControleDeColaborador",components:{MenuLSGP:Mt},data(){return{filtroSetor:"",setores:[],setoresVisitante:[],pessoaIDModal:null,pessoaNomeModal:null,pessoaCPFModal:null,dadosVisitaModal:{},localId:"",filtroNome:"",result:"",error:"",colaborador:[],localData:[],page:1,lastPage:null,currentPage:0,itemsPerPage:10,filtro:"",nome:null}},mounted(){this.buscaColaborador(this.page),this.obterTodosSetores(),this.nome=localStorage.getItem("userName")},computed:{paginatedData(){const e=this.currentPage*this.itemsPerPage,a=e+this.itemsPerPage;let o=this.colaborador.filter((e=>e.nomeCompleto.toLowerCase().includes(this.filtro.toLowerCase())));return o.slice(e,a)},numberOfPages(){return Math.ceil(this.colaborador.length/this.itemsPerPage)}},methods:{mostraGenero(e){return"f"===e?"Feminino":"m"===e?"Masculino":e},obterTodosSetores(){Js.obterTodos().then((e=>{this.setores=e.data.data.map((e=>new Ys(e)))})).catch((e=>{console.log(e),this.toast.error("Erro ao carregar lista de setores",{timeout:2e3})}))},ordenarPessoas(e,a){return e.id<a.id?-1:e.id>a.id?1:0},async buscaColaborador(e){try{const a=await fetch(`http://192.168.0.6:8000/api/pessoa?page=${e}`),o=await a.json();this.colaborador=o.data||[],this.lastPage=o.last_page||1,this.page=e}catch(a){console.error("Error:",a)}},adicionarColaborador(){this.$router.push({name:"AdicionarColaborador"})},editarColaborador(e){this.$router.push({name:"ColaboradorEditar",params:{id:e.id}}),console.log("id colaborador",e.id)},excluirPessoa(e){this.idToDelete=e},confirmarExclusao(){const e=this.idToDelete,a=this.colaborador.findIndex((a=>a.id===e));-1!==a&&E.Z.delete(`http://192.168.0.6:8000/api/pessoa/${e}`).then((e=>{console.log("Response",e),200===e.status||204===e.status?(this.buscaColaborador(this.page),Wn.show("Colaborador excluido com sucesso",{type:"success"})):Wn.show("Falha ao deletar",{type:"error"})})).catch((e=>{console.error("Error:",e)}))},setPage(e){this.currentPage=e},prevPage(){this.currentPage>0&&this.currentPage--},nextPage(){this.currentPage<this.numberOfPages-1&&this.currentPage++},changePage(){this.currentPage=this.selectedPage}}};const Tn=(0,z.Z)(Hn,[["render",$n]]);var Yn=Tn;const Zn=[{path:"/",name:"Login",component:ke,meta:{hideMenu:!0}},{path:"/alterarSenha",name:"AlterarSenha",component:Eo},{path:"/esqueceuSenha",name:"EsqueceuSenha",component:da,meta:{hideMenu:!0}},{path:"/validarSenha",name:"ValidarSenha",component:Ja,meta:{hideMenu:!0}},{path:"/home",name:"HomeView",component:Ie},{path:"/acesso",name:"AcessoView",component:zt},{path:"/acesso/home",name:"AcessoHomeView",component:Il},{path:"/visitante",name:"VisitanteView",component:ri},{path:"/visitante/novo",name:"VisitanteCadastro",component:Hi},{path:"/visitante/editar/:id",name:"EditarVisitante",component:Hi},{path:"/pesquisa",name:"PesquisaView",component:El},{path:"/colaborador",name:"ControleDeColaborador",component:Yn},{path:"/colaboradores/novo",name:"AdicionarColaborador",component:ln,title:"Adicionar Colaborador"},{path:"/colaboradores/editar/:id",name:"ColaboradorEditar",component:ln,title:"Editar Colaborador"},{path:"/colaboradores/excluir",name:"ExcluirColaborador",component:ln,title:"Excluir Colaborador"}],Bn=(0,B.p7)({mode:"history",history:(0,B.PO)(),routes:Zn});var Gn=Bn,Kn=o(1095);const Qn=(0,t.ri)(Z);Qn.use(Gn),Qn.use(Kn.ZP),Qn.mount("#app")}},a={};function o(t){var s=a[t];if(void 0!==s)return s.exports;var i=a[t]={id:t,loaded:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}o.m=e,function(){var e=[];o.O=function(a,t,s,i){if(!t){var l=1/0;for(d=0;d<e.length;d++){t=e[d][0],s=e[d][1],i=e[d][2];for(var r=!0,n=0;n<t.length;n++)(!1&i||l>=i)&&Object.keys(o.O).every((function(e){return o.O[e](t[n])}))?t.splice(n--,1):(r=!1,i<l&&(l=i));if(r){e.splice(d--,1);var c=s();void 0!==c&&(a=c)}}return a}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[t,s,i]}}(),function(){o.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(a,{a:a}),a}}(),function(){o.d=function(e,a){for(var t in a)o.o(a,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){o.p="/"}(),function(){var e={143:0};o.O.j=function(a){return 0===e[a]};var a=function(a,t){var s,i,l=t[0],r=t[1],n=t[2],c=0;if(l.some((function(a){return 0!==e[a]}))){for(s in r)o.o(r,s)&&(o.m[s]=r[s]);if(n)var d=n(o)}for(a&&a(t);c<l.length;c++)i=l[c],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(d)},t=self["webpackChunkthalamus_3"]=self["webpackChunkthalamus_3"]||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))}();var t=o.O(void 0,[998],(function(){return o(6868)}));t=o.O(t)})();
//# sourceMappingURL=app.f442a665.js.map